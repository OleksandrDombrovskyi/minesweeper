{"version":3,"sources":["utils/detectmobilebrowser.js","actions/actions.tsx","components/flag/flag.component.tsx","components/flags/flags.component.tsx","components/button/button.component.tsx","components/symbol-button-content/symbol-button-content.component.tsx","components/cell/cell.component.tsx","reducers/game/game.selector.tsx","components/counter/counter.component.tsx","utils/timerUtils.tsx","components/timer/timer.component.tsx","components/central-navbar/central-navbar.component.tsx","components/header/header.component.tsx","components/grid/grid.component.tsx","components/body/body.component.tsx","components/bottom-panel/bottom-panel.component.tsx","components/menu-drawer/menu.component.tsx","components/level-dialog/level-dialog.component.tsx","App.tsx","serviceWorker.ts","utils/gridUtils.tsx","utils/gridGeneratorUtils.tsx","reducers/game/data.tsx","reducers/game/game.reducer.tsx","reducers/rootReducer.tsx","index.tsx"],"names":["isMobileDevice","some","toMatchItem","navigator","userAgent","match","startGame","createAction","cellClicked","cellRightClicked","cellClickFailed","gameWon","incrementTime","dragNDropFlag","selectFlag","selectCrossedFlag","selectQuestion","selectCrossedQuestion","selectMagicWand","openMenuAction","closeMenuAction","openLevelDialog","closeLevelDialog","changeLevel","DnDTypes","FlagImage","props","cellPosition","dispatch","useDispatch","useDrag","item","type","position","end","monitor","isFLagDroppedOutOfTable","getDropResult","cellToRemoveFlag","removeFlagFromCell","collect","isDragging","drag","preview","DragPreviewImage","connect","src","ref","width","height","style","opacity","alt","MobilePreviewForTouchEvent","usePreview","display","itemType","zIndex","top","left","Flags","id","className","Button","children","getClassName","isPressed","isFailed","isOver","SymbolButtonContent","symbol","fontSize","getClass","CellState","CellProps","number","state","this","INITIAL","GridCell","memo","useEffect","useDrop","accept","drop","draggedFlag","destinationPosition","flagSourcePosition","flagPosition","x","y","isTheSameCell","OPEN","flagInitPosition","cellToAddFlag","removeFlagFromSourceCellAndAddToDestinationCell","handleDragNDropFlag","onClick","onCellClick","onContextMenu","onCellRightClick","getNumberContent","FLAGGED","getFlagContent","QUESTIONED","getButtonContent","prevProps","nextProps","event","preventDefault","ownProps","selectCellNumber","selectCellState","selectCellIsFailed","selectGameState","gameState","selectGameGrid","createSelector","grid","selectIsGameFailed","isGameFailed","selectIsGameWon","isGameWon","selectIsGridGenerated","isGridCalculated","selectGameGridBombs","cells","selectClickedCell","cellsProps","cellProps","selectBombAmount","flat","filter","cell","length","selectFlagAmount","selectGameTime","gameTime","selectIsFlagSelected","isFlagSelected","selectIsCrossedFlagSelected","isFlagCrossedSelected","selectIsQuestionSelected","isQuestionSelected","selectIsRemoveQuestionSelected","isRemoveQuestionSelected","selectIsMagicWandSelected","isMagicWandSelected","selectIsMenuOpened","isMenuOpened","selectMagicWandCounter","magicWandCounter","selectIsLevelDialogOpened","isLevelDialogOpened","selectLevelParams","level","Counter","bombAmount","useSelector","flagAmount","formatInDoubleDigit","timeValue","intervalId","Timer","setInterval","clearInterval","timeSeconds","hours","Math","floor","minutes","seconds","toString","formatTime","CentralNavbar","levelParams","imageName","getSmileImageName","paddingTop","color","dispatchStartGame","Header","paddingLeft","cursor","mapStateToProps","createStructuredSelector","numberOfColumns","numberOfRows","gridTemplateColumns","gridTemplateRows","map","cellProp","key","Body","marginBottom","BottomPanel","isCrossedFlagSelected","isIsMagicWandSelected","disableIdCounterZero","pointerEvents","DrawerMenu","open","onChange","isOpened","overlayColor","Toolbar","Typography","variant","marginLeft","MenuItem","ListItemIcon","ListItemText","primary","LevelDialog","useState","scaleValue","setScale","complexityValue","setComplexity","Dialog","onClose","aria-labelledby","fullWidth","DialogTitle","DialogContent","FormControl","component","FormLabel","RadioGroup","aria-label","name","value","target","FormControlLabel","control","Radio","label","DialogActions","scale","complexity","App","Boolean","window","location","hostname","openCell","isPositionOutOfBound","i","j","generateDefaultGrid","numberGrid","cellGrid","Array","row","push","convertNumbersIntoCellProps","booleanGrid","array","convertBooleanGridToNumber","slice","convertArrayIntoGrid","random","shuffle","arrayLength","booleanArray","generateBooleanArray","moveBombsFromClickedCellAndCalculateGrid","gridCells","gridWithEmptyClickedCell","newX","newY","randomInt","isNewPositionInClickedCellArea","isBombCell","moveBombsFromClickedCellArea","forEach","plusOneToEveryoneAroundBomb","min","max","levelsTable","Map","magicWandAmount","INITIAL_LEVEL_PARAMS","get","INITIAL_STATE","createNewGameState","rerenderGridOnDragNDroppedFlag","removeFlagCell","handleOnDragNDroppedRemoveFlag","droppedCell","handleOnDragNDroppedFlag","isGameInProcess","every","isAllCellsOpened","openAllBombsGrid","cellArray","openAllBombs","rerenderGridOnClick","clickedCell","addFlag","removeFlag","addQuestion","removeQuestion","openCellSafely","handleOnClick","rerenderGridOnRightClick","handleOnRightClick","reducers","combineReducers","action","getType","actions","payload","store","createStore","applyMiddleware","ReactDOM","render","StrictMode","DndProvider","backend","HTML5Backend","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.8ec71816.chunk.js","sourcesContent":["export function isMobileDevice() {\n    const toMatch = [\n        /Android/i,\n        /webOS/i,\n        /iPhone/i,\n        /iPad/i,\n        /iPod/i,\n        /BlackBerry/i,\n        /Windows Phone/i\n    ];\n\n    return toMatch.some((toMatchItem) => {\n        return navigator.userAgent.match(toMatchItem);\n    });\n}","import {CellPosition} from \"../components/cell/cell.component\";\nimport {GameLevel} from \"../components/level-dialog/level-dialog.component\";\nimport {LevelParams} from \"../reducers/game/data\";\nimport {createAction} from \"typesafe-actions\";\n\nexport const startGame = createAction('startGame')<LevelParams>();\nexport const cellClicked = createAction('cellClicked')<CellPosition>();\nexport const cellRightClicked = createAction('cellRightClicked')<CellPosition>();\nexport const cellClickFailed = createAction('cellClickFailed')<void>();\nexport const gameWon = createAction('gameWon')<void>();\nexport const incrementTime = createAction('incrementTime')<void>();\nexport const dragNDropFlag = createAction('dragNDropFlag')<MoveFlagProps>();\nexport const selectFlag = createAction('selectFlag')<void>();\nexport const selectCrossedFlag = createAction('selectCrossedFlag')<void>();\nexport const selectQuestion = createAction('selectQuestion')<void>();\nexport const selectCrossedQuestion = createAction('selectCrossedQuestion')<void>();\nexport const selectMagicWand = createAction('selectMagicWand')<void>();\nexport const openMenuAction = createAction('openMenuAction')<void>();\nexport const closeMenuAction = createAction('closeMenuAction')<void>();\nexport const openLevelDialog = createAction('openLevelDialog')<void>();\nexport const closeLevelDialog = createAction('closeLevelDialog')<void>();\nexport const changeLevel = createAction('changeLevel')<GameLevel>();\n\nexport interface MoveFlagProps {\n    cellToAddFlag?: CellPosition,\n    cellToRemoveFlag?: CellPosition\n}","import React from \"react\";\nimport './flag.style.css';\nimport {CellPosition} from \"../cell/cell.component\";\nimport {DragPreviewImage, DragSourceMonitor, useDrag} from \"react-dnd\";\nimport {SourceType} from \"dnd-core\";\nimport {useDispatch} from \"react-redux\";\nimport {Dispatch} from \"redux\";\nimport {isMobileDevice} from \"../../utils/detectmobilebrowser\";\n// @ts-ignore\nimport {usePreview} from 'react-dnd-preview';\nimport {dragNDropFlag} from \"../../actions/actions\";\n\nexport const DnDTypes = {\n    FLAG: 'flag'\n}\n\nexport interface FlagProps {\n    cellPosition?: CellPosition;\n}\n\nexport interface FlagDragObject {\n    type: SourceType,\n    position?: CellPosition\n}\n\nexport const FlagImage = (props: FlagProps) => {\n    const {cellPosition} = props\n    let dispatch = useDispatch();\n\n    const [{isDragging}, drag, preview] = useDrag<FlagDragObject, boolean, any>({\n        item: {\n            type: DnDTypes.FLAG,\n            position: props.cellPosition\n        },\n        end: (item, monitor: DragSourceMonitor) => {\n            let isFLagDroppedOutOfTable = !monitor.getDropResult();\n            if (cellPosition && isFLagDroppedOutOfTable) {\n                removeFlagFromCell(dispatch, cellPosition);\n            }\n        },\n        collect: monitor => ({\n            isDragging: monitor.isDragging()\n        })\n    })\n\n    return (\n        <>\n            {\n                isMobileDevice()\n                    ? <MobilePreviewForTouchEvent/>\n                    : <DragPreviewImage connect={preview} src=\"flag_24x24.png\"/>\n            }\n            <img ref={drag} width=\"22\" height=\"22\" src=\"flag_24x24.png\"\n                 style={{opacity: cellPosition && isDragging ? 0.5 : 1}}\n                 alt=\"F\"/>\n        </>\n    )\n}\n\nfunction removeFlagFromCell(dispatch: Dispatch<any>, cellPosition: CellPosition) {\n    dispatch(dragNDropFlag({cellToRemoveFlag: cellPosition}))\n}\n\nconst MobilePreviewForTouchEvent = () => {\n    const {display, itemType, item, style} = usePreview();\n    if (!display) {\n        return null;\n    }\n    if (itemType === DnDTypes.FLAG) {\n        return (\n            <img width=\"50\" height=\"50\" src=\"flag_big.png\" alt=\"F\"\n                 style={{...style, zIndex: 50, top: -10, left: -10}}/>\n        )\n    }\n    return null;\n};\n","import React from \"react\";\nimport './flags.style.css';\nimport {FlagImage} from \"../flag/flag.component\";\n\nexport const Flags = () => {\n\n    return (\n        <div id=\"drag_n_drop_flags_container_id\" className=\"drag_n_drop_flags_container\">\n            <div className=\"drag_n_drop_flag_1\">\n                <FlagImage/>\n            </div>\n            <div className=\"drag_n_drop_flag_2\">\n                <FlagImage/>\n            </div>\n            <div className=\"drag_n_drop_flag_3\">\n                <FlagImage/>\n            </div>\n            <div className=\"drag_n_drop_flag_4\">\n                <FlagImage/>\n            </div>\n        </div>\n    )\n}","import React, {FunctionComponent, PropsWithChildren} from \"react\";\nimport './button.style.css';\n\nexport interface ButtonProps {\n    isPressed: boolean;\n    isFailed?: boolean;\n    isOver?: boolean;\n    width?: number;\n    height?: number;\n    stroke?: number;\n}\n\nexport const Button: FunctionComponent<ButtonProps> = (props: PropsWithChildren<ButtonProps>) => {\n    const {\n        width = 30,\n        height = 30,\n        children\n    } = props;\n\n    return (\n        <div className=\"button_container\" style={{width, height}}>\n            <div className={getClassName(props) + \" content\"} style={{width, height}}>\n                {children}\n            </div>\n        </div>\n    )\n};\n\nfunction getClassName({isPressed, isFailed, isOver}: ButtonProps) {\n    let isPressedClassName = isPressed ? \"open\" : \"initial\";\n    let isFailedClassName = isFailed ? \"failedCell\" : \"\";\n    let isOverClassName = !isPressed && isOver ? \"over\" : \"\";\n\n    return isPressedClassName + \" \" + isFailedClassName + \" \" + isOverClassName;\n}\n","import React, {FunctionComponent} from \"react\";\nimport './symbol-button-content.style.css';\n\nexport interface NumberContentProps {\n    symbol: number | string;\n    fontSize: number;\n}\n\nexport const SymbolButtonContent: FunctionComponent<NumberContentProps> = ({symbol, fontSize}) => {\n\n    return (\n        <span className={getClass(symbol)} style={{fontSize: fontSize + \"pt\"}}>{symbol}</span>\n    )\n}\n\nfunction getClass(symbol: number | string) {\n    if (symbol === \"?\") {\n        return \"question\";\n    } else {\n        return \"number_\" + symbol;\n    }\n}\n","import React, {Dispatch, FC, memo, MouseEvent, useEffect} from \"react\";\nimport './cell.style.css';\nimport {connect, useDispatch} from \"react-redux\";\nimport {AppState} from \"../../reducers/rootReducer\";\nimport {selectCellIsFailed, selectCellNumber, selectCellState} from \"../../reducers/game/game.selector\";\nimport {Button} from \"../button/button.component\";\nimport {SymbolButtonContent} from \"../symbol-button-content/symbol-button-content.component\";\nimport {DnDTypes, FlagDragObject, FlagImage} from \"../flag/flag.component\";\nimport {useDrop} from \"react-dnd\";\nimport {cellClicked, cellClickFailed, cellRightClicked, dragNDropFlag} from \"../../actions/actions\";\n\nexport enum CellState {\n    INITIAL,\n    FLAGGED,\n    QUESTIONED,\n    OPEN,\n}\n\nexport interface CellPosition {\n    x: number;\n    y: number;\n}\n\nexport class CellProps {\n    position: CellPosition;\n    number: number;\n    state: CellState;\n    isFailed: boolean;\n\n    constructor(position: CellPosition, number: number) {\n        this.position = position;\n        this.number = number;\n        this.state = CellState.INITIAL;\n        this.isFailed = false;\n    }\n}\n\nconst GridCell: FC<CellProps> = memo(({position, number, state, isFailed}) => {\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (isFailed) {\n            dispatch(cellClickFailed());\n        }\n    }, [dispatch, isFailed]);\n\n    const [{isOver}, drop] = useDrop<FlagDragObject, any, { isOver: boolean }>({\n        accept: DnDTypes.FLAG,\n        drop: (item: FlagDragObject) => handleDragNDropFlag(item, position, state, dispatch),\n        collect: monitor => ({\n            isOver: monitor.isOver()\n        })\n    });\n\n    return (\n        <div id={position.x + \"_\" + position.y} className=\"gridCell\"\n             onClick={onCellClick(position, dispatch)}\n             onContextMenu={onCellRightClick(position, dispatch)}>\n            <div ref={drop}>\n                <Button isPressed={state === CellState.OPEN} isFailed={isFailed} isOver={isOver}>\n                    {\n                        getButtonContent(state, number, position)\n                    }\n                </Button>\n            </div>\n        </div>\n    );\n}, ((prevProps: CellProps, nextProps: CellProps) => {\n    // rendering optimization on first click: CellProps.number is skipped because it is calculated after first click\n    let isPositionEqual = prevProps.position.x === nextProps.position.x\n        && prevProps.position.y === nextProps.position.y;\n    return isPositionEqual\n        && prevProps.state === nextProps.state\n        && prevProps.isFailed === nextProps.isFailed;\n}));\n\nfunction onCellRightClick(position: CellPosition, dispatch: Dispatch<any>) {\n    return (event: MouseEvent) => {\n        // prevent opening contextual menu on right button click\n        event.preventDefault();\n        dispatch(cellRightClicked(position))\n    }\n}\n\nfunction onCellClick(position: CellPosition, dispatch: Dispatch<any>) {\n    return () => {\n        dispatch(cellClicked(position))\n    };\n}\n\nfunction getButtonContent(state: CellState, number: number, position: CellPosition) {\n    switch (state) {\n        case CellState.INITIAL:\n            return null;\n        case CellState.OPEN:\n            if (number === -1) {\n                return getBombContent();\n            } else if (number > 0) {\n                return getNumberContent(number);\n            } else {\n                return null;\n            }\n        case CellState.FLAGGED:\n            return getFlagContent(position);\n        case CellState.QUESTIONED:\n            return getQuestionContent();\n    }\n}\n\nfunction getQuestionContent() {\n    return (\n        <SymbolButtonContent symbol={\"?\"} fontSize={18}/>\n    );\n}\n\nfunction getFlagContent(position: CellPosition) {\n    return (\n        <FlagImage cellPosition={position}/>\n    );\n}\n\nfunction getBombContent() {\n    return (\n        <img className=\"bomb\" width=\"33\" height=\"33\" src=\"bomb.svg\" alt='bomb'/>\n    );\n}\n\nfunction getNumberContent(number: number) {\n    return (\n        <SymbolButtonContent symbol={number} fontSize={18}/>\n    );\n}\n\nfunction handleDragNDropFlag(draggedFlag: FlagDragObject, destinationPosition: CellPosition, state: CellState, dispatch: Dispatch<any>) {\n    let flagSourcePosition = draggedFlag.position;\n    if (isTheSameCell(flagSourcePosition, destinationPosition) || state === CellState.OPEN) {\n        return;\n    }\n    removeFlagFromSourceCellAndAddToDestinationCell(dispatch, destinationPosition, flagSourcePosition);\n}\n\nfunction isTheSameCell(flagPosition: CellPosition | undefined, position: CellPosition) {\n    return flagPosition && ((flagPosition.x === position.x) && (flagPosition.y === position.y));\n}\n\nfunction removeFlagFromSourceCellAndAddToDestinationCell(dispatch: (value: any) => void, position: CellPosition, flagInitPosition: CellPosition | undefined) {\n    dispatch(dragNDropFlag({\n        cellToAddFlag: position,\n        cellToRemoveFlag: flagInitPosition\n    }))\n}\n\nconst mapStateToProps = (state: AppState, ownProps: CellProps): CellProps => ({\n    position: ownProps.position,\n    number: selectCellNumber(ownProps.position)(state),\n    state: selectCellState(ownProps.position)(state),\n    isFailed: selectCellIsFailed(ownProps.position)(state)\n})\n\nexport default connect(mapStateToProps)(GridCell)","import {createSelector} from 'reselect';\nimport {AppState} from \"../rootReducer\";\nimport {GameState, Grid} from \"./game.reducer\";\nimport {CellPosition, CellProps, CellState} from \"../../components/cell/cell.component\";\nimport {LevelParams} from \"./data\";\n\nconst selectGameState = (state: AppState): GameState => state.gameState;\n\nexport const selectGameGrid = createSelector<AppState, GameState, Grid>(\n    [selectGameState],\n    (gameState: GameState) => gameState.grid\n);\n\nexport const selectIsGameFailed = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isGameFailed\n)\n\nexport const selectIsGameWon = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isGameWon\n)\n\nexport const selectIsGridGenerated = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isGridCalculated\n)\n\nexport const selectGameGridBombs = createSelector<AppState, Grid, CellProps[][]>(\n    [selectGameGrid],\n    (grid: Grid) => grid.cells\n)\n\nexport const selectClickedCell = (position: CellPosition) => createSelector<AppState, CellProps[][], CellProps>(\n    [selectGameGridBombs],\n    (cellsProps: CellProps[][]) => cellsProps[position.y][position.x]\n)\n\nexport const selectCellNumber = (position: CellPosition) => createSelector<AppState, CellProps, number>(\n    [selectClickedCell(position)],\n    (cellProps: CellProps) => cellProps.number\n)\n\nexport const selectCellState = (position: CellPosition) => createSelector<AppState, CellProps, CellState>(\n    [selectClickedCell(position)],\n    (cellProps: CellProps) => cellProps.state\n)\n\nexport const selectCellIsFailed = (position: CellPosition) => createSelector<AppState, CellProps, boolean>(\n    [selectClickedCell(position)],\n    (cellProps: CellProps) => cellProps.isFailed\n)\n\nexport const selectBombAmount = createSelector<AppState, Grid, number>(\n    [selectGameGrid],\n    (grid: Grid) => grid.cells.flat().filter(cell => cell.number === -1).length\n)\n\nexport const selectFlagAmount = createSelector<AppState, Grid, number>(\n    [selectGameGrid],\n    (grid: Grid) => grid.cells.flat().filter(cell => cell.state === CellState.FLAGGED).length\n)\n\nexport const selectGameTime = createSelector<AppState, GameState, number>(\n    [selectGameState],\n    (gameState: GameState) => gameState.gameTime\n)\n\nexport const selectIsFlagSelected = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isFlagSelected\n)\n\nexport const selectIsCrossedFlagSelected = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isFlagCrossedSelected\n)\n\nexport const selectIsQuestionSelected = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isQuestionSelected\n)\n\nexport const selectIsRemoveQuestionSelected = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isRemoveQuestionSelected\n)\n\nexport const selectIsMagicWandSelected = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isMagicWandSelected\n)\n\nexport const selectIsMenuOpened = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isMenuOpened\n)\n\nexport const selectMagicWandCounter = createSelector<AppState, GameState, number>(\n    [selectGameState],\n    (gameState: GameState) => gameState.magicWandCounter\n)\n\nexport const selectIsLevelDialogOpened = createSelector<AppState, GameState, boolean>(\n    [selectGameState],\n    (gameState: GameState) => gameState.isLevelDialogOpened\n)\n\nexport const selectLevelParams = createSelector<AppState, GameState, LevelParams>(\n    [selectGameState],\n    (gameState: GameState) => gameState.level\n)","import React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {selectBombAmount, selectFlagAmount} from \"../../reducers/game/game.selector\";\nimport './counter.style.css';\n\nexport const Counter = () => {\n\n    const bombAmount = useSelector(selectBombAmount);\n    const flagAmount = useSelector(selectFlagAmount);\n\n    return (\n        <div>\n            <div className=\"bomb_amount_container\"><span className=\"bomb_amount\">{bombAmount - flagAmount}</span></div>\n            <div className=\"image_container\"><img className=\"bomb_image\" src=\"bomb.svg\" alt=\"bomb\"/></div>\n        </div>\n    )\n}","export function formatTime(timeSeconds: number): string {\n    const hours = Math.floor(timeSeconds / 3600);\n    const minutes = Math.floor((timeSeconds % 3600) / 60);\n    const seconds = (timeSeconds % 3600) % 60;\n    return formatInDoubleDigit(hours.toString()) + \":\" + formatInDoubleDigit(minutes.toString()) + \":\" + formatInDoubleDigit(seconds.toString());\n}\n\nfunction formatInDoubleDigit(timeValue: string) {\n    if (timeValue.length === 0) {\n        return \"00\";\n    } else if(timeValue.length === 1) {\n        return \"0\" + timeValue;\n    } else {\n        return timeValue;\n    }\n}\n","import React, {useEffect} from \"react\";\nimport {formatTime} from \"../../utils/timerUtils\";\nimport './timer.style.css';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {selectGameTime} from \"../../reducers/game/game.selector\";\nimport {incrementTime} from \"../../actions/actions\";\n\nlet intervalId: NodeJS.Timeout;\n\nexport const Timer = () => {\n    const gameTime = useSelector(selectGameTime);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        intervalId = setInterval(\n            () => dispatch(incrementTime()),\n            1000\n        );\n\n        return () => {\n            clearInterval(intervalId);\n        }\n    }, [dispatch])\n\n    return (\n        <div>\n            <span className=\"timer_span\">{formatTime(gameTime)}</span>\n        </div>\n    );\n}","import React from \"react\";\nimport './central-navbar.style.css';\nimport {Flags} from \"../flags/flags.component\";\nimport {Counter} from \"../counter/counter.component\";\nimport {Timer} from \"../timer/timer.component\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    selectBombAmount,\n    selectFlagAmount,\n    selectIsGameFailed,\n    selectIsGameWon,\n    selectLevelParams\n} from \"../../reducers/game/game.selector\";\nimport {isMobileDevice} from \"../../utils/detectmobilebrowser\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport {LevelParams} from \"../../reducers/game/data\";\nimport {openMenuAction, startGame} from \"../../actions/actions\";\n\nexport const CentralNavbar = () => {\n\n    const dispatch = useDispatch();\n\n    const levelParams = useSelector(selectLevelParams);\n\n    const isGameWon = useSelector(selectIsGameWon)\n    const isGameFailed = useSelector(selectIsGameFailed)\n    const bombAmount = useSelector(selectBombAmount);\n    const flagAmount = useSelector(selectFlagAmount);\n\n    let imageName = getSmileImageName(isGameFailed, isGameWon, bombAmount, flagAmount);\n\n    return (\n        <div className=\"central-navbar\">\n            <div className=\"flags\">\n                {\n                    isMobileDevice()\n                        ? <MenuIcon fontSize=\"large\" style={{paddingTop: 10}} color=\"action\"\n                                    onClick={() => dispatch(openMenuAction())}/>\n                        : <Flags/>\n                }\n            </div>\n            <div className=\"counter\">\n                <Counter/>\n            </div>\n            <div className=\"smile\">\n                <img className=\"smile_image\" src={\"smiles/\" + imageName} alt=\":)\"\n                     onClick={dispatchStartGame(dispatch, levelParams)}/>\n            </div>\n            <div className=\"timer\">\n                <Timer/>\n            </div>\n        </div>\n    )\n}\n\nfunction getSmileImageName(isGameFailed: boolean, isGameWon: boolean, bombAmount: number, flagAmount: number) {\n    if (isGameFailed) {\n        return \"failed.png\";\n    } else if (isGameWon) {\n        return \"win.png\";\n    } else if (bombAmount < flagAmount) {\n        return \"laugh.png\";\n    } else {\n        return \"start.png\";\n    }\n}\n\nfunction dispatchStartGame(dispatch: React.Dispatch<any>, levelParams: LevelParams) {\n    return () => dispatch(startGame(levelParams))\n}","import React, {Dispatch} from \"react\";\nimport \"./header.style.css\";\nimport {CentralNavbar} from \"../central-navbar/central-navbar.component\";\nimport {isMobileDevice} from \"../../utils/detectmobilebrowser\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport {useDispatch} from \"react-redux\";\nimport {openMenuAction} from \"../../actions/actions\";\n\nexport const Header = () => {\n\n    const dispatch = useDispatch();\n\n    return (\n        <div className=\"header\">\n            {\n                !isMobileDevice() &&\n                <div className=\"left_box\">\n                    <MenuIcon\n                        fontSize=\"large\"\n                        style={{paddingTop: 10, paddingLeft: 10, cursor: \"pointer\"}}\n                        color=\"action\"\n                        onClick={() => dispatch(openMenuAction())}/>\n                </div>\n            }\n            <div className=\"centered_box\">\n                <CentralNavbar/>\n            </div>\n            {\n                !isMobileDevice() &&\n                <div className=\"right_box\">\n                </div>\n            }\n        </div>\n    )\n}","import React, {useEffect} from \"react\";\nimport GridCell, {CellProps} from \"../cell/cell.component\";\nimport './grid.style.css';\nimport {GameState} from \"../../reducers/game/game.reducer\";\nimport {createStructuredSelector} from \"reselect\";\nimport {\n    selectGameGrid,\n    selectGameTime,\n    selectIsCrossedFlagSelected,\n    selectIsFlagSelected,\n    selectIsGameFailed,\n    selectIsGameWon,\n    selectIsGridGenerated,\n    selectIsLevelDialogOpened,\n    selectIsMagicWandSelected,\n    selectIsMenuOpened,\n    selectIsQuestionSelected,\n    selectIsRemoveQuestionSelected,\n    selectLevelParams,\n    selectMagicWandCounter\n} from \"../../reducers/game/game.selector\";\nimport {AppState} from \"../../reducers/rootReducer\";\nimport {connect, useDispatch} from \"react-redux\";\nimport {gameWon} from \"../../actions/actions\";\n\nconst GridComponent = (props: GameState) => {\n\n    const {\n        isGameWon,\n        isGameFailed,\n        grid,\n        level\n    } = props;\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (isGameWon) {\n            dispatch(gameWon())\n        }\n    }, [dispatch, isGameWon])\n\n    const numberOfColumns = level.width;\n    const numberOfRows = level.height;\n\n    return (\n        <div className={\"grid\" + (isGameFailed || isGameWon ? \" disabled\" : \"\")}  style={{\n            gridTemplateColumns: `repeat(${numberOfColumns}, 33px)`,\n            gridTemplateRows: `repeat(${numberOfRows}, 33px)`\n        }}>\n            {\n                grid.cells.map((cellProps: Array<CellProps>) =>\n                    cellProps.map(cellProp => <GridCell\n                        key={cellProp.position.x + \"x\" + cellProp.position.y} {...cellProp}/>))\n            }\n        </div>\n    )\n}\n\nconst mapStateToProps = createStructuredSelector<AppState, GameState>({\n    grid: selectGameGrid,\n    isGameFailed: selectIsGameFailed,\n    isGameWon: selectIsGameWon,\n    isGridCalculated: selectIsGridGenerated,\n    gameTime: selectGameTime,\n    isFlagSelected: selectIsFlagSelected,\n    isFlagCrossedSelected: selectIsCrossedFlagSelected,\n    isQuestionSelected: selectIsQuestionSelected,\n    isRemoveQuestionSelected: selectIsRemoveQuestionSelected,\n    isMagicWandSelected: selectIsMagicWandSelected,\n    isMenuOpened: selectIsMenuOpened,\n    magicWandCounter: selectMagicWandCounter,\n    isLevelDialogOpened: selectIsLevelDialogOpened,\n    level: selectLevelParams,\n})\n\nexport default connect(mapStateToProps)(GridComponent)","import React from \"react\";\nimport './body.style.css';\nimport GridComponent from \"../grid/grid.component\";\nimport {isMobileDevice} from \"../../utils/detectmobilebrowser\";\n\nexport const Body = () => {\n    return (\n        <div className=\"body_container\">\n            <div className=\"body\" style={isMobileDevice() ? {marginBottom: \"80px\"} : {}}>\n                <GridComponent/>\n            </div>\n        </div>\n    )\n}","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    selectIsCrossedFlagSelected,\n    selectIsFlagSelected,\n    selectIsMagicWandSelected,\n    selectIsQuestionSelected,\n    selectIsRemoveQuestionSelected, selectMagicWandCounter\n} from \"../../reducers/game/game.selector\";\nimport './bottom-panel.style.css';\nimport {Button} from \"../button/button.component\";\nimport {\n    selectCrossedFlag,\n    selectCrossedQuestion,\n    selectFlag,\n    selectMagicWand,\n    selectQuestion\n} from \"../../actions/actions\";\n\nexport const BottomPanel = () => {\n\n    const dispatch = useDispatch();\n    const isFlagSelected = useSelector(selectIsFlagSelected);\n    const isCrossedFlagSelected = useSelector(selectIsCrossedFlagSelected);\n    const isQuestionSelected = useSelector(selectIsQuestionSelected);\n    const isRemoveQuestionSelected = useSelector(selectIsRemoveQuestionSelected);\n    const isIsMagicWandSelected = useSelector(selectIsMagicWandSelected);\n    const magicWandCounter = useSelector(selectMagicWandCounter);\n\n    const buttonWidth = 60;\n    const buttonHeight = 60;\n    const smallButtonWidth = 30;\n    const smallButtonHeight = 30;\n\n    return (\n        <div className=\"bottom_panel\">\n            <div className=\"questions\">\n                <div className=\"add_question\" onClick={() => dispatch(selectQuestion())}>\n                    <Button isPressed={isQuestionSelected} height={buttonHeight} width={buttonWidth}>\n                        <img width=\"44\" height=\"44\" src=\"question.png\" alt=\"?\"/>\n                    </Button>\n                </div>\n                <div className=\"remove_question small_button\" onClick={() => dispatch(selectCrossedQuestion())}>\n                    <Button isPressed={isRemoveQuestionSelected} height={smallButtonHeight} width={smallButtonWidth}>\n                        <img width=\"22\" height=\"22\" src=\"crossed_question.png\" alt=\"?x\"/>\n                    </Button>\n                </div>\n            </div>\n            <div className=\"magic_wand\" onClick={() => dispatch(selectMagicWand())} style={disableIdCounterZero(magicWandCounter)}>\n                <Button isPressed={isIsMagicWandSelected} height={buttonHeight} width={buttonWidth}>\n                    <img width=\"44\" height=\"44\" src=\"magic_wand.png\" alt=\"Magic\"/>\n                    <span className=\"magic_wand_counter\">{magicWandCounter}</span>\n                </Button>\n            </div>\n            <div className=\"flags\">\n                <div className=\"remove_flag small_button\" onClick={() => dispatch(selectCrossedFlag())}>\n                    <Button isPressed={isCrossedFlagSelected} height={smallButtonHeight} width={smallButtonWidth}>\n                        <img width=\"22\" height=\"22\" src=\"crossed_flag.png\" alt=\"Fx\"/>\n                    </Button>\n                </div>\n                <div className=\"add_flag\" onClick={() => dispatch(selectFlag())}>\n                    <Button isPressed={isFlagSelected} height={buttonHeight} width={buttonWidth}>\n                        <img width=\"44\" height=\"44\" src=\"flag_big.png\" alt=\"F\"/>\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction disableIdCounterZero(magicWandCounter: number): React.CSSProperties | undefined {\n    return magicWandCounter <= 0 ? {pointerEvents: \"none\", opacity: 0.5} : {};\n}\n","import React from \"react\";\nimport './menu.style.css';\nimport {ListItemIcon, ListItemText, MenuItem, Toolbar, Typography} from \"@material-ui/core\";\nimport TuneIcon from '@material-ui/icons/Tune';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport HelpIcon from '@material-ui/icons/Help';\nimport CloseIcon from '@material-ui/icons/Close';\nimport {useDispatch, useSelector} from \"react-redux\";\n// @ts-ignore\nimport Drawer from 'react-motion-drawer';\nimport {selectIsMenuOpened} from \"../../reducers/game/game.selector\";\nimport {closeMenuAction, openLevelDialog, openMenuAction} from \"../../actions/actions\";\n\nexport const DrawerMenu = () => {\n\n    const dispatch = useDispatch();\n    const isMenuOpened = useSelector(selectIsMenuOpened);\n\n    return (\n        <Drawer className=\"drawer-menu\" open={isMenuOpened}\n                onChange={(isOpened: boolean) =>\n                    isOpened\n                        ? dispatch(openMenuAction())\n                        : dispatch(closeMenuAction())}\n                overlayColor=\"rgba(0, 0, 0, 0.4)\" width={250}>\n            <Toolbar>\n                <Typography variant=\"h6\">\n                    Menu\n                </Typography>\n                <CloseIcon\n                    fontSize=\"large\"\n                    color=\"action\"\n                    style={{marginLeft: \"auto\", cursor: \"pointer\"}}\n                    onClick={() => dispatch(closeMenuAction())}/>\n            </Toolbar>\n            <MenuItem>\n                <ListItemIcon>\n                    <TuneIcon fontSize=\"small\"/>\n                </ListItemIcon>\n                <ListItemText primary=\"Level\" onClick={() => dispatch(openLevelDialog())}/>\n            </MenuItem>\n            <MenuItem>\n                <ListItemIcon>\n                    <SettingsIcon fontSize=\"small\"/>\n                </ListItemIcon>\n                <ListItemText primary=\"Settings\"/>\n            </MenuItem>\n            <MenuItem>\n                <ListItemIcon>\n                    <HelpIcon fontSize=\"small\"/>\n                </ListItemIcon>\n                <ListItemText primary=\"Help\"/>\n            </MenuItem>\n        </Drawer>\n    )\n}","import React, {useState} from \"react\";\nimport './level-dialog.style.css';\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControl,\n    FormControlLabel,\n    FormLabel,\n    ListItemIcon,\n    Radio,\n    RadioGroup,\n    Toolbar,\n    Typography\n} from \"@material-ui/core\";\nimport TuneIcon from \"@material-ui/icons/Tune\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {selectIsLevelDialogOpened} from \"../../reducers/game/game.selector\";\nimport {changeLevel, closeLevelDialog} from \"../../actions/actions\";\n\nexport type GameComplexity = \"easy\" | \"medium\" | \"hard\" | \"crazy\";\nexport type GameScale = \"small\" | \"medium\" | \"big\" | \"huge\";\n\nexport interface GameLevel {\n    scale: GameScale\n    complexity: GameComplexity\n}\n\nexport const LevelDialog = () => {\n\n    const [scaleValue, setScale] = useState<GameScale>(\"small\");\n    const [complexityValue, setComplexity] = useState<GameComplexity>(\"easy\");\n\n    const handleChangeScale = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setScale((event.target as HTMLInputElement).value as GameScale);\n    };\n\n    const handleChangeComplexity = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setComplexity((event.target as HTMLInputElement).value as GameComplexity);\n    }\n\n    const dispatch = useDispatch();\n    const isLevelDialogOpened = useSelector(selectIsLevelDialogOpened);\n\n    return (\n        <Dialog open={isLevelDialogOpened} onClose={() => dispatch(closeLevelDialog())}\n                aria-labelledby=\"form-dialog-title\" fullWidth={true}>\n            <DialogTitle id=\"form-dialog-title\">\n                <Toolbar>\n                    <ListItemIcon>\n                        <TuneIcon fontSize=\"small\"/>\n                    </ListItemIcon>\n                    <Typography variant=\"h6\">Level</Typography>\n                </Toolbar>\n            </DialogTitle>\n            <DialogContent>\n                <div className=\"dialog_content\">\n                    <div className=\"radio_group\">\n                        <FormControl component=\"fieldset\">\n                            <FormLabel component=\"legend\">Field scale</FormLabel>\n                            <RadioGroup aria-label=\"scale\" name=\"scale\" value={scaleValue} onChange={handleChangeScale}>\n                                <FormControlLabel value=\"small\" control={<Radio color=\"primary\"/>} label=\"Small\"/>\n                                <FormControlLabel value=\"medium\" control={<Radio color=\"primary\"/>} label=\"Medium\"/>\n                                <FormControlLabel value=\"big\" control={<Radio color=\"primary\"/>} label=\"Big\"/>\n                                <FormControlLabel value=\"huge\" control={<Radio color=\"secondary\"/>} label=\"Huge\"/>\n                            </RadioGroup>\n                        </FormControl>\n                    </div>\n                    <div className=\"radio_group\">\n                        <FormControl component=\"fieldset\">\n                            <FormLabel component=\"legend\">Complexity</FormLabel>\n                            <RadioGroup aria-label=\"complexity\" name=\"complexity\" value={complexityValue}\n                                        onChange={handleChangeComplexity}>\n                                <FormControlLabel value=\"easy\" control={<Radio color=\"primary\"/>} label=\"Easy\"/>\n                                <FormControlLabel value=\"medium\" control={<Radio color=\"primary\"/>} label=\"Medium\"/>\n                                <FormControlLabel value=\"hard\" control={<Radio color=\"primary\"/>} label=\"Hard\"/>\n                                <FormControlLabel value=\"crazy\" control={<Radio color=\"secondary\"/>} label=\"I'm crazy\"/>\n                            </RadioGroup>\n                        </FormControl>\n                    </div>\n                </div>\n                <DialogActions>\n                    <Button onClick={() => dispatch(closeLevelDialog())} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={() => dispatch(changeLevel({scale: scaleValue, complexity: complexityValue}))}\n                            color=\"primary\">\n                        Save\n                    </Button>\n                </DialogActions>\n            </DialogContent>\n        </Dialog>\n    )\n}","import React from 'react';\nimport './App.css';\nimport {Header} from \"./components/header/header.component\";\nimport {Body} from \"./components/body/body.component\";\nimport {isMobileDevice} from \"./utils/detectmobilebrowser\";\nimport {BottomPanel} from \"./components/bottom-panel/bottom-panel.component\";\nimport {DrawerMenu} from \"./components/menu-drawer/menu.component\";\nimport {LevelDialog} from \"./components/level-dialog/level-dialog.component\";\n\nexport const App = () => {\n    return (\n        <div className=\"App\">\n            <DrawerMenu/>\n            <Header/>\n            <Body/>\n            {\n                isMobileDevice() && <BottomPanel/>\n            }\n\n            <LevelDialog/>\n        </div>\n    );\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {Grid} from \"../reducers/game/game.reducer\";\nimport {CellPosition, CellProps, CellState} from \"../components/cell/cell.component\";\n\nexport function handleOnClick(cells: CellProps[][], cellPosition: CellPosition) {\n    const clickedCell = cells[cellPosition.y][cellPosition.x];\n\n    if (clickedCell.state === CellState.FLAGGED || clickedCell.state === CellState.QUESTIONED) {\n        return;\n    }\n\n    if (clickedCell.number === -1) {\n        clickedCell.isFailed = true;\n    }\n\n    openCell(cells, clickedCell.position)\n}\n\nexport function addFlag(cells: CellProps[][], cellPosition: CellPosition) {\n    const clickedCell = cells[cellPosition.y][cellPosition.x];\n\n    if (clickedCell.state !== CellState.OPEN) {\n        clickedCell.state = CellState.FLAGGED;\n    }\n}\n\nexport function removeFlag(cells: CellProps[][], cellPosition: CellPosition) {\n    const clickedCell = cells[cellPosition.y][cellPosition.x];\n\n    if (clickedCell.state === CellState.FLAGGED) {\n        clickedCell.state = CellState.INITIAL;\n    }\n}\n\nexport function addQuestion(cells: CellProps[][], cellPosition: CellPosition) {\n    const clickedCell = cells[cellPosition.y][cellPosition.x];\n\n    if (clickedCell.state !== CellState.OPEN) {\n        clickedCell.state = CellState.QUESTIONED;\n    }\n}\n\nexport function removeQuestion(cells: CellProps[][], cellPosition: CellPosition) {\n    const clickedCell = cells[cellPosition.y][cellPosition.x];\n\n    if (clickedCell.state === CellState.QUESTIONED) {\n        clickedCell.state = CellState.INITIAL;\n    }\n}\n\nexport function openCellSafely(cells: CellProps[][], cellPosition: CellPosition): boolean {\n    const clickedCell = cells[cellPosition.y][cellPosition.x];\n\n    if (clickedCell.state === CellState.OPEN || clickedCell.state === CellState.FLAGGED) {\n        return false;\n    }\n\n    if (clickedCell.number === -1) {\n        clickedCell.state = CellState.FLAGGED;\n    } else {\n        openCell(cells, clickedCell.position)\n    }\n    return true;\n}\n\nexport function handleOnRightClick(cells: CellProps[][], cellPosition: CellPosition) {\n    const clickedCell = cells[cellPosition.y][cellPosition.x];\n    switch (clickedCell.state) {\n        case CellState.INITIAL:\n            clickedCell.state = CellState.FLAGGED;\n            break;\n        case CellState.FLAGGED:\n            clickedCell.state = CellState.QUESTIONED;\n            break;\n        case CellState.QUESTIONED:\n            clickedCell.state = CellState.INITIAL;\n    }\n}\n\nexport function handleOnDragNDroppedFlag(cells: CellProps[][], cellPosition: CellPosition) {\n    const droppedCell = cells[cellPosition.y][cellPosition.x];\n    if (droppedCell.state === CellState.INITIAL || droppedCell.state === CellState.QUESTIONED) {\n        droppedCell.state = CellState.FLAGGED;\n    }\n}\n\nexport function handleOnDragNDroppedRemoveFlag(cells: CellProps[][], cellPosition: CellPosition) {\n    const removeFlagCell = cells[cellPosition.y][cellPosition.x];\n    if (removeFlagCell.state !== CellState.OPEN) {\n        removeFlagCell.state = CellState.INITIAL;\n    }\n}\n\nexport function openAllBombs(grid: Grid): void {\n    grid.cells.forEach(cellArray => cellArray.forEach(cell => {\n        if (cell.number === -1 && cell.state !== CellState.FLAGGED) {\n            cell.state = CellState.OPEN;\n        }\n    }));\n}\n\nexport function isAllCellsOpened(cells: Array<Array<CellProps>>) {\n    return cells.flat()\n        .filter(cell => cell.number !== -1)\n        .every(cell => cell.state === CellState.OPEN)\n}\n\nfunction openCell(cells: CellProps[][], cellPosition: CellPosition) {\n    if (isPositionOutOfBound(cells, cellPosition)) {\n        return;\n    }\n\n    const cell = cells[cellPosition.y][cellPosition.x];\n    if (cell.state === CellState.OPEN) {\n        return; // to avoid looping on neighbouring empty cells\n    }\n    cell.state = CellState.OPEN;\n\n    // open all cells around\n    if (cell.number === 0) {\n        for (let i = cellPosition.x - 1; i <= cellPosition.x + 1; i++) {\n            for (let j = cellPosition.y - 1; j <= cellPosition.y + 1; j++) {\n                if (i === cellPosition.x && j === cellPosition.y) {\n                    continue;\n                }\n\n                openCell(cells, {x: i, y: j})\n            }\n        }\n    }\n}\n\nexport function isPositionOutOfBound(grid: Array<Array<CellProps>>, cellPosition: CellPosition) {\n    return cellPosition.x < 0 || cellPosition.y < 0\n        || cellPosition.x >= grid.length || cellPosition.y >= grid[0].length;\n}\n","import {CellPosition, CellProps} from \"../components/cell/cell.component\";\nimport {isPositionOutOfBound} from \"./gridUtils\";\nimport {LevelParams} from \"../reducers/game/data\";\n\nexport function generateDefaultGrid({width, height, bombAmount}: LevelParams): Array<Array<CellProps>> {\n    let booleanArray = generateBooleanArray(width, height, bombAmount);\n    let shuffledBooleanArray = shuffle(booleanArray);\n    let booleanGrid = convertArrayIntoGrid(shuffledBooleanArray, width, height);\n    let numberGrid = convertBooleanGridToNumber(booleanGrid);\n    return convertNumbersIntoCellProps(numberGrid);\n}\n\nexport function moveBombsFromClickedCellAndCalculateGrid(gridCells: Array<Array<CellProps>>, position: CellPosition): Array<Array<CellProps>> {\n    let gridWithEmptyClickedCell = moveBombsFromClickedCellArea(position, gridCells)\n    return calculateCellBombNumbers(gridWithEmptyClickedCell);\n}\n\nexport function moveBombsFromClickedCellArea(position: CellPosition, grid: Array<Array<CellProps>>): Array<Array<CellProps>> {\n    for (let i = position.x - 1; i <= position.x + 1; i++) {\n        for (let j = position.y - 1; j <= position.y + 1; j++) {\n            if (isPositionOutOfBound(grid, {x: j, y: i})) {\n                continue;\n            }\n\n            const cell = grid[j][i];\n            if (cell.number === -1) {\n                let newX;\n                let newY;\n                do {\n                    newX = randomInt(0, grid[0].length - 1);\n                    newY = randomInt(0, grid.length - 1);\n                } while (isNewPositionInClickedCellArea(newX, newY, position) || isBombCell(newX, newY, grid))\n                cell.number = 0;\n                grid[newY][newX].number = -1;\n            }\n        }\n    }\n    return grid;\n}\n\nfunction isBombCell(x: number, y: number, grid: Array<Array<CellProps>>) {\n    return grid[y][x].number === -1;\n}\n\nfunction isNewPositionInClickedCellArea(newX: number, newY: number, position: CellPosition) {\n    return (newX >= position.x - 1 && newX <= position.x + 1) && (newY >= position.y - 1 && newY <= position.y + 1);\n}\n\nfunction randomInt(min: number, max: number): number {\n    return min + Math.floor((max - min) * Math.random());\n}\n\nexport function generateBooleanArray(width: number, height: number, bombAmount: number): Array<boolean> {\n    const arrayLength = width * height;\n    const booleanArray = new Array<boolean>();\n\n    for (let i = 0; i < arrayLength; i++) {\n        if (i < bombAmount) {\n            booleanArray.push(true);\n        } else {\n            booleanArray.push(false);\n        }\n    }\n\n    return booleanArray;\n}\n\nfunction shuffle(array: Array<boolean>): Array<boolean> {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n}\n\nexport function convertArrayIntoGrid<T>(array: Array<T>, width: number, height: number): Array<Array<T>> {\n    const grid = new Array<Array<T>>();\n\n    for (let i = 0; i < height; i++) {\n        grid.push(array.slice(width * i, width * (i + 1)));\n    }\n\n    return grid;\n}\n\nexport function convertBooleanGridToNumber(booleanGrid: Array<Array<boolean>>): Array<Array<number>> {\n    return booleanGrid.map((array: Array<boolean>) => array.map((cell: boolean) => cell ? -1 : 0));\n}\n\nexport function convertNumbersIntoCellProps(numberGrid: Array<Array<number>>): Array<Array<CellProps>> {\n    const cellGrid = new Array<Array<CellProps>>();\n\n    for (let i = 0; i < numberGrid.length; i++) {\n        let row = new Array<CellProps>();\n        for (let j = 0; j < numberGrid[0].length; j++) {\n            row.push(new CellProps({x: j, y: i}, numberGrid[i][j]))\n        }\n        cellGrid.push(row);\n    }\n\n    return cellGrid;\n}\n\nexport function calculateCellBombNumbers(grid: Array<Array<CellProps>>): Array<Array<CellProps>> {\n    grid.forEach((array: Array<CellProps>) => array.forEach((cell: CellProps) => {\n        if (cell.number === -1) {\n            plusOneToEveryoneAroundBomb(cell.position, grid)\n        }\n    }))\n\n    return grid;\n}\n\nexport function plusOneToEveryoneAroundBomb(cellPosition: CellPosition, grid: Array<Array<CellProps>>) {\n    for (let i = cellPosition.x - 1; i <= cellPosition.x + 1; i++) {\n        for (let j = cellPosition.y - 1; j <= cellPosition.y + 1; j++) {\n            if (i === cellPosition.x && j === cellPosition.y) {\n                continue;\n            }\n\n            if (isPositionOutOfBound(grid, {x: j, y: i})) {\n                continue;\n            }\n\n            const cell = grid[j][i];\n            if (cell.number !== -1) {\n                cell.number += 1;\n            }\n        }\n    }\n}\n\n","import {GameComplexity, GameScale} from \"../../components/level-dialog/level-dialog.component\";\n\nexport interface LevelParams {\n    width: number,\n    height: number,\n    bombAmount: number,\n    magicWandAmount: number\n}\n\nexport const levelsTable = new Map<GameScale, Map<GameComplexity, LevelParams>>([\n    [\"small\", new Map<GameComplexity, LevelParams>([\n        [\"easy\", {width: 10, height: 10, bombAmount: 15, magicWandAmount: 3}],\n        [\"medium\", {width: 10, height: 10, bombAmount: 20, magicWandAmount: 3}],\n        [\"hard\", {width: 10, height: 10, bombAmount: 25, magicWandAmount: 3}],\n        [\"crazy\", {width: 10, height: 10, bombAmount: 30, magicWandAmount: 3}]\n    ])],\n    [\"medium\", new Map<GameComplexity, LevelParams>([\n        [\"easy\", {width: 20, height: 20, bombAmount: 60, magicWandAmount: 6}],\n        [\"medium\", {width: 20, height: 20, bombAmount: 80, magicWandAmount: 6}],\n        [\"hard\", {width: 20, height: 20, bombAmount: 100, magicWandAmount: 6}],\n        [\"crazy\", {width: 20, height: 20, bombAmount: 120, magicWandAmount: 6}]\n    ])],\n    [\"big\", new Map<GameComplexity, LevelParams>([\n        [\"easy\", {width: 30, height: 30, bombAmount: 135, magicWandAmount: 10}],\n        [\"medium\", {width: 30, height: 30, bombAmount: 180, magicWandAmount: 10}],\n        [\"hard\", {width: 30, height: 30, bombAmount: 225, magicWandAmount: 10}],\n        [\"crazy\", {width: 30, height: 30, bombAmount: 270, magicWandAmount: 10}]\n    ])],\n    [\"huge\", new Map<GameComplexity, LevelParams>([\n        [\"easy\", {width: 50, height: 50, bombAmount: 375, magicWandAmount: 15}],\n        [\"medium\", {width: 50, height: 50, bombAmount: 500, magicWandAmount: 15}],\n        [\"hard\", {width: 50, height: 50, bombAmount: 625, magicWandAmount: 15}],\n        [\"crazy\", {width: 50, height: 50, bombAmount: 750, magicWandAmount: 15}]\n    ])]\n])","import * as actions from \"../../actions/actions\";\nimport {CellPosition, CellProps} from \"../../components/cell/cell.component\";\nimport {\n    addFlag,\n    addQuestion,\n    handleOnClick,\n    handleOnDragNDroppedFlag,\n    handleOnDragNDroppedRemoveFlag,\n    handleOnRightClick,\n    isAllCellsOpened,\n    openAllBombs,\n    openCellSafely,\n    removeFlag,\n    removeQuestion\n} from \"../../utils/gridUtils\";\nimport {generateDefaultGrid, moveBombsFromClickedCellAndCalculateGrid} from \"../../utils/gridGeneratorUtils\";\nimport {LevelParams, levelsTable} from \"./data\";\nimport {ActionType, getType, Reducer} from \"typesafe-actions\";\n\ntype Actions = ActionType<typeof actions>\n\nexport interface Grid {\n    cells: Array<Array<CellProps>>\n}\n\nexport interface GameState {\n    isGameWon: boolean;\n    isGameFailed: boolean\n    isGridCalculated: boolean;\n    gameTime: number;\n    isFlagSelected: boolean;\n    isFlagCrossedSelected: boolean;\n    isQuestionSelected: boolean;\n    isRemoveQuestionSelected: boolean;\n    isMagicWandSelected: boolean;\n    magicWandCounter: number;\n    isMenuOpened: boolean;\n    isLevelDialogOpened: boolean;\n    level: LevelParams,\n    grid: Grid;\n}\n\nexport const INITIAL_LEVEL_PARAMS: LevelParams = levelsTable.get(\"small\")?.get(\"easy\") as LevelParams;\n\nexport const INITIAL_STATE: GameState = {\n    isGameWon: false,\n    isGameFailed: false,\n    isGridCalculated: false,\n    gameTime: 0,\n    isFlagSelected: false,\n    isFlagCrossedSelected: false,\n    isQuestionSelected: false,\n    isRemoveQuestionSelected: false,\n    isMagicWandSelected: false,\n    magicWandCounter: INITIAL_LEVEL_PARAMS.magicWandAmount,\n    isMenuOpened: false,\n    isLevelDialogOpened: false,\n    level: INITIAL_LEVEL_PARAMS,\n    grid: {\n        cells: generateDefaultGrid(INITIAL_LEVEL_PARAMS)\n    }\n}\n\nexport const gameReducer: Reducer<GameState, Actions> = (state: GameState = INITIAL_STATE, action: Actions): GameState => {\n    switch (action.type) {\n        case getType(actions.startGame):\n            return createNewGameState(action.payload);\n        case getType(actions.cellClicked):\n            let cells = rerenderGridOnClick(state, action.payload);\n            return {\n                ...state,\n                grid: {\n                    cells: cells\n                },\n                isGameWon: isGameWon(cells),\n                isFlagSelected: false,\n                isFlagCrossedSelected: false,\n                isQuestionSelected: false,\n                isRemoveQuestionSelected: false,\n                isMagicWandSelected: false\n            }\n        case getType(actions.cellClickFailed):\n            return {\n                ...state,\n                grid: openAllBombsGrid(state.grid),\n                isGameFailed: true,\n            }\n        case getType(actions.cellRightClicked):\n            return {\n                ...state,\n                grid: {\n                    cells: rerenderGridOnRightClick(state.grid.cells, action.payload),\n                }\n            }\n        case getType(actions.gameWon):\n            return {\n                ...state,\n                grid: openAllBombsGrid(state.grid),\n            }\n        case getType(actions.incrementTime):\n            return {\n                ...state,\n                gameTime: isGameInProcess(state) ? state.gameTime + 1 : state.gameTime,\n            }\n        case getType(actions.dragNDropFlag):\n            return {\n                ...state,\n                grid: {\n                    cells: rerenderGridOnDragNDroppedFlag(state.grid.cells, action.payload.cellToAddFlag, action.payload.cellToRemoveFlag),\n                }\n            }\n        case getType(actions.selectFlag):\n            return {\n                ...state,\n                isFlagSelected: !state.isFlagSelected,\n                isFlagCrossedSelected: false,\n                isQuestionSelected: false,\n                isRemoveQuestionSelected: false,\n                isMagicWandSelected: false\n            }\n        case getType(actions.selectCrossedFlag):\n            return {\n                ...state,\n                isFlagCrossedSelected: !state.isFlagCrossedSelected,\n                isFlagSelected: false,\n                isQuestionSelected: false,\n                isRemoveQuestionSelected: false,\n                isMagicWandSelected: false\n            }\n        case getType(actions.selectQuestion):\n            return {\n                ...state,\n                isQuestionSelected: !state.isQuestionSelected,\n                isFlagSelected: false,\n                isFlagCrossedSelected: false,\n                isRemoveQuestionSelected: false,\n                isMagicWandSelected: false\n            }\n        case getType(actions.selectCrossedQuestion):\n            return {\n                ...state,\n                isRemoveQuestionSelected: !state.isRemoveQuestionSelected,\n                isFlagSelected: false,\n                isFlagCrossedSelected: false,\n                isQuestionSelected: false,\n                isMagicWandSelected: false\n            }\n        case getType(actions.selectMagicWand):\n            return {\n                ...state,\n                isMagicWandSelected: state.isMagicWandSelected ? false : state.isGridCalculated && state.magicWandCounter > 0,\n                isFlagSelected: false,\n                isFlagCrossedSelected: false,\n                isQuestionSelected: false,\n                isRemoveQuestionSelected: false\n            }\n        case getType(actions.openMenuAction):\n            return {\n                ...state,\n                isMenuOpened: true\n            }\n        case getType(actions.closeMenuAction):\n            return {\n                ...state,\n                isMenuOpened: false\n            }\n        case getType(actions.openLevelDialog):\n            return {\n                ...state,\n                isLevelDialogOpened: true,\n                isMenuOpened: false\n            }\n        case getType(actions.closeLevelDialog):\n            return {\n                ...state,\n                isLevelDialogOpened: false\n            }\n        case getType(actions.changeLevel):\n            const levelParams: LevelParams = levelsTable.get(action.payload.scale)?.get(action.payload.complexity) as LevelParams;\n            return createNewGameState(levelParams)\n        default:\n            return INITIAL_STATE;\n    }\n}\n\nfunction createNewGameState(levelParams: LevelParams) {\n    return {\n        ...INITIAL_STATE,\n        magicWandCounter: levelParams.magicWandAmount,\n        level: levelParams,\n        grid: {\n            cells: generateDefaultGrid(levelParams)\n        }\n    };\n}\n\nfunction rerenderGridOnDragNDroppedFlag(cells: Array<Array<CellProps>>, cellToAddFlag?: CellPosition, cellToRemoveFlag?: CellPosition): Array<Array<CellProps>> {\n    if (cellToRemoveFlag) {\n        handleOnDragNDroppedRemoveFlag(cells, cellToRemoveFlag);\n    }\n    if (cellToAddFlag) {\n        handleOnDragNDroppedFlag(cells, cellToAddFlag);\n    }\n    return cells;\n}\n\nfunction isGameInProcess(state: GameState) {\n    return state.isGridCalculated && !state.isGameFailed && !state.isGameWon;\n}\n\nfunction isGameWon(cells: CellProps[][]) {\n    return isAllCellsOpened(cells);\n}\n\nfunction openAllBombsGrid(grid: Grid) {\n    openAllBombs(grid)\n    return grid;\n}\n\nfunction rerenderGridOnClick(state: GameState, cellPosition: CellPosition): CellProps[][] {\n    let gridCells = state.grid.cells;\n\n    if (state.isFlagSelected) {\n        addFlag(gridCells, cellPosition);\n    } else if (state.isFlagCrossedSelected) {\n        removeFlag(gridCells, cellPosition);\n    } else if (state.isQuestionSelected) {\n        addQuestion(gridCells, cellPosition);\n    } else if (state.isRemoveQuestionSelected) {\n        removeQuestion(gridCells, cellPosition);\n    } else if (state.isMagicWandSelected) {\n        const isUsed = openCellSafely(gridCells, cellPosition);\n        if (isUsed) {\n            state.magicWandCounter--;\n        }\n    } else {\n        if (!state.isGridCalculated) {\n            gridCells = moveBombsFromClickedCellAndCalculateGrid(gridCells, cellPosition);\n            state.isGridCalculated = true;\n        }\n        handleOnClick(gridCells, cellPosition);\n    }\n    return gridCells;\n}\n\nfunction rerenderGridOnRightClick(cells: CellProps[][], cellPosition: CellPosition): CellProps[][] {\n    handleOnRightClick(cells, cellPosition);\n    return cells;\n}\n","import {combineReducers} from \"redux\";\nimport {gameReducer, GameState} from \"./game/game.reducer\";\n\nexport interface AppState {\n    gameState: GameState\n}\n\nexport const reducers = combineReducers<AppState>({\n    gameState: gameReducer\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {App} from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {applyMiddleware, createStore} from \"redux\";\nimport {Provider} from 'react-redux';\nimport {reducers} from \"./reducers/rootReducer\";\nimport logger from 'redux-logger';\nimport {DndProvider} from \"react-dnd\";\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\n\nconst middlewares = [];\n\nif (process.env.NODE_ENV === 'development') {\n    middlewares.push(logger);\n}\n\nconst store = createStore(reducers, applyMiddleware(...middlewares));\n\n// to turn drag-n-drop feature on for mobile client, use <DndProvider backend={isMobileDevice() ? TouchBackend : HTML5Backend}>\n//TODO: make it configurable in Settings\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <DndProvider backend={HTML5Backend}>\n                <App/>\n            </DndProvider>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}