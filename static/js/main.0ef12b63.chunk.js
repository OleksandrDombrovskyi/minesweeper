(this.webpackJsonpsapper=this.webpackJsonpsapper||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(34)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),l=n(5),c=n.n(l),o=(n(18),n(19),n(3)),s=n(1),u=n(2),d=n(12);n(25);function m(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return navigator.userAgent.match(e)}))}function g(e){return function(t){if(!m()&&0===t.button){var n=t.currentTarget,r=n.parentElement;n.ondragstart=function(){return!1};var i=h(n,".gridCell");document.body.appendChild(n);var l=n.style.position,c=n.style.zIndex,o=n.style.top,s=n.style.left;n.style.position="absolute",n.style.zIndex="1000",p(t.pageX,t.pageY,n);var u=function(e){p(e.pageX,e.pageY,n)};document.addEventListener("mousemove",u),n.onmouseup=function(t){document.removeEventListener("mousemove",u),n&&document.body.removeChild(n);var d=h(document.elementFromPoint(t.pageX,t.pageY),".gridCell"),m=f(i),g=f(d);if(g||m){if((null===g||void 0===g?void 0:g.x)===(null===m||void 0===m?void 0:m.x)&&(null===g||void 0===g?void 0:g.y)===(null===m||void 0===m?void 0:m.y))return void(r&&(r.appendChild(n),n.style.position=l||"relative",n.style.zIndex=c||"initial",n.style.top=o||"-32px",n.style.left=s||"-2px"));e({type:a.dragNDroppedFlag,payload:{cellToAddFlag:g,cellToRemoveFlag:m}})}}}}}function f(e){if(e){var t=e.id,n=t.substr(0,t.indexOf("_")),a=t.substr(t.indexOf("_")+1);return n&&a?{x:+n,y:+a}:null}return null}function p(e,t,n){n&&(n.style.left=e-n.offsetWidth/2+"px",n.style.top=t-n.offsetHeight/2+"px")}!function(e){e[e.startGame=0]="startGame",e[e.cellClicked=1]="cellClicked",e[e.cellClickFailed=2]="cellClickFailed",e[e.gameWon=3]="gameWon",e[e.cellRightClicked=4]="cellRightClicked",e[e.incrementTime=5]="incrementTime",e[e.dragNDroppedFlag=6]="dragNDroppedFlag",e[e.selectFlag=7]="selectFlag",e[e.selectCrossedFlag=8]="selectCrossedFlag"}(a||(a={}));var v,h=function(e,t){for(;null!=e;){if(e.matches(t))return e;if(null==e.parentElement)return null;e=e.parentElement}return null};!function(e){e[e.INITIAL=0]="INITIAL",e[e.FLAGGED=1]="FLAGGED",e[e.QUESTIONED=2]="QUESTIONED",e[e.OPEN=3]="OPEN"}(v||(v={}));var E=function e(t,n){Object(d.a)(this,e),this.position=void 0,this.number=void 0,this.state=void 0,this.isFailed=void 0,this.position=t,this.number=n,this.state=v.INITIAL,this.isFailed=!1};function b(e,t){return function(n){n.preventDefault(),t({type:a.cellRightClicked,payload:e})}}function y(e,t){return function(){t({type:a.cellClicked,payload:e})}}var N=Object(s.b)((function(e,t){return{position:t.position,number:I(t.position)(e),state:w(t.position)(e),isFailed:T(t.position)(e)}}))((function(e){var t=e.position,n=e.number,l=e.state,c=e.isFailed,o=Object(s.c)();return Object(r.useEffect)((function(){c&&o({type:a.cellClickFailed})})),i.a.createElement("div",{id:e.position.x+"_"+e.position.y,className:"gridCell",onClick:y(t,o),onContextMenu:b(t,o)},function(e,t,n,a){switch(e){case v.INITIAL:return i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"initial",width:"30",height:"30"}));case v.OPEN:return-1===t?function(e){return i.a.createElement("div",{className:"img-overlay-svg"},i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"open"+(e?" failedCell":""),width:"30",height:"30"})),i.a.createElement("img",{width:"33",height:"33",src:"bomb.svg",alt:"123"}))}(n):t>0?function(e){return i.a.createElement("div",null,i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"open",width:"30",height:"30"})),i.a.createElement("span",{className:"number_"+e},e))}(t):i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"open",width:"30",height:"30"}));case v.FLAGGED:return function(e){return i.a.createElement("div",{className:"img-overlay-svg"},i.a.createElement("svg",{className:"cell-sign",width:"33",height:"33"},i.a.createElement("rect",{className:"initial",width:"30",height:"30"})),i.a.createElement("img",{className:"cell-sign flag",width:"22",height:"22",src:"flag.png",alt:"123",onMouseDown:g(e)}))}(a);case v.QUESTIONED:return i.a.createElement("div",null,i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"initial",width:"30",height:"30"})),i.a.createElement("span",{className:"question"},"?"))}}(l,n,c,o))})),O=function(e){return e.gameState},F=Object(u.a)([O],(function(e){return e.grid})),_=Object(u.a)([O],(function(e){return e.isGameFailed})),j=Object(u.a)([O],(function(e){return e.isGameWon})),C=Object(u.a)([O],(function(e){return e.isGridCalculated})),G=Object(u.a)([F],(function(e){return e.cells})),x=function(e){return Object(u.a)([G],(function(t){return t[e.y][e.x]}))},I=function(e){return Object(u.a)([x(e)],(function(e){return e.number}))},w=function(e){return Object(u.a)([x(e)],(function(e){return e.state}))},T=function(e){return Object(u.a)([x(e)],(function(e){return e.isFailed}))},A=Object(u.a)([F],(function(e){return e.cells.flat().filter((function(e){return-1===e.number})).length})),S=Object(u.a)([F],(function(e){return e.cells.flat().filter((function(e){return e.state===v.FLAGGED})).length})),D=Object(u.a)([O],(function(e){return e.gameTime})),k=Object(u.a)([O],(function(e){return e.isFlagSelected})),L=Object(u.a)([O],(function(e){return e.isFlagCrossedSelected}));n(26);function P(e,t){var n=e[t.y][t.x];n.state!==v.FLAGGED&&n.state!==v.QUESTIONED&&(-1===n.number&&(n.isFailed=!0),function e(t,n){if(W(t,n))return;var a=t[n.y][n.x];if(a.state===v.OPEN)return;if(a.state=v.OPEN,0===a.number)for(var r=n.x-1;r<=n.x+1;r++)for(var i=n.y-1;i<=n.y+1;i++)r===n.x&&i===n.y||e(t,{x:r,y:i})}(e,n.position))}function W(e,t){return t.x<0||t.y<0||t.x>=e.length||t.y>=e[0].length}function M(e,t){return function(e){for(var t=new Array,n=0;n<e.length;n++){for(var a=new Array,r=0;r<e[0].length;r++)a.push(new E({x:r,y:n},e[n][r]));t.push(a)}return t}(function(e){return e.map((function(e){return e.map((function(e){return e?-1:0}))}))}(function(e,t,n){for(var a=new Array,r=0;r<n;r++)a.push(e.slice(t*r,t*(r+1)));return a}(function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(function(e,t){for(var n=e*t,a=Math.floor(n/4),r=new Array,i=0;i<n;i++)i<a?r.push(!0):r.push(!1);return r}(e,t)),e,t)))}function Q(e,t){var n,a=function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if(!W(t,{x:a,y:n})){var r=t[a][n];if(-1===r.number){var i=void 0,l=void 0;do{i=X(0,t[0].length-1),l=X(0,t.length-1)}while(R(i,l,e)||U(i,l,t));r.number=0,t[l][i].number=-1}}return t}(t,e);return(n=a).forEach((function(e){return e.forEach((function(e){-1===e.number&&function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if((n!==e.x||a!==e.y)&&!W(t,{x:a,y:n})){var r=t[a][n];-1!==r.number&&(r.number+=1)}}(e.position,n)}))})),n}function U(e,t,n){return-1===n[t][e].number}function R(e,t,n){return e>=n.x-1&&e<=n.x+1&&t>=n.y-1&&t<=n.y+1}function X(e,t){return e+Math.floor((t-e)*Math.random())}n(27);var Y=function(){var e=Object(s.d)(A),t=Object(s.d)(S);return i.a.createElement("div",null,i.a.createElement("div",{className:"bomb_amount_container"},i.a.createElement("span",{className:"bomb_amount"},e-t)),i.a.createElement("div",{className:"image_container"},i.a.createElement("img",{className:"bomb_image",src:"bomb.svg",alt:"123"})))};function B(e){return 0===e.length?"00":1===e.length?"0"+e:e}n(28);var z,J=function(){var e=Object(s.d)(D),t=Object(s.c)();return Object(r.useEffect)((function(){return z=setInterval((function(){return t({type:a.incrementTime})}),1e3),function(){clearInterval(z)}})),i.a.createElement("div",null,i.a.createElement("span",{className:"timer_span"},function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%3600%60;return B(t.toString())+":"+B(n.toString())+":"+B(a.toString())}(e)))},q=(n(29),function(){var e=Object(s.c)();return Object(r.useEffect)((function(){return function(e){var t=document.getElementById("draggable_flag");t&&(t.ondragstart=function(){return!1},t.onmousedown=function(n){if(t){var r=t.cloneNode(!0);r.id="clonedFlag",document.body.appendChild(r),r.ondragstart=function(){return!1},r.style.position="absolute",r.style.zIndex="1000",p(n.pageX,n.pageY,r);var i=function(e){p(e.pageX,e.pageY,r)};document.addEventListener("mousemove",i),r.onmouseup=function(t){document.removeEventListener("mousemove",i),r&&document.body.removeChild(r);var n=f(h(document.elementFromPoint(t.pageX,t.pageY),".gridCell"));n&&e({type:a.dragNDroppedFlag,payload:{cellToAddFlag:n}})}}})}(e)})),i.a.createElement("div",{id:"drag_n_drop_flags_container_id",className:"drag_n_drop_flags_container"},i.a.createElement("img",{className:"drag_n_drop_flag_1",width:"22",height:"22",src:"flag.png",alt:"123"}),i.a.createElement("img",{className:"drag_n_drop_flag_2",width:"22",height:"22",src:"flag.png",alt:"123"}),i.a.createElement("img",{className:"drag_n_drop_flag_3",width:"22",height:"22",src:"flag.png",alt:"123"}),i.a.createElement("img",{id:"draggable_flag",className:"drag_n_drop_flag_4",width:"22",height:"22",src:"flag.png",alt:"123"}))}),H={isGameWon:!1,isGameFailed:!1,isGridCalculated:!1,gameTime:0,isFlagSelected:!1,isFlagCrossedSelected:!1,grid:{cells:M(10,10)}};function $(e,t,n){return n&&function(e,t){var n=e[t.y][t.x];n.state!==v.OPEN&&(n.state=v.INITIAL)}(e,n),t&&function(e,t){var n=e[t.y][t.x];n.state!==v.INITIAL&&n.state!==v.QUESTIONED||(n.state=v.FLAGGED)}(e,t),e}function K(e){return e.isGridCalculated&&!e.isGameFailed&&!e.isGameWon}function V(e){return function(e){return e.flat().filter((function(e){return-1!==e.number})).every((function(e){return e.state===v.OPEN}))}(e)}function Z(e){return function(e){e.cells.forEach((function(e){return e.forEach((function(e){-1===e.number&&e.state!==v.FLAGGED&&(e.state=v.OPEN)}))}))}(e),e}function ee(e,t){var n=e.grid.cells;return e.isFlagSelected?function(e,t){var n=e[t.y][t.x];n.state!==v.OPEN&&(n.state=v.FLAGGED)}(n,t):e.isFlagCrossedSelected?function(e,t){var n=e[t.y][t.x];n.state===v.FLAGGED&&(n.state=v.INITIAL)}(n,t):(e.isGridCalculated||(n=Q(n,t),e.isGridCalculated=!0),P(n,t)),n}function te(e,t){return function(e,t){var n=e[t.y][t.x];switch(n.state){case v.INITIAL:n.state=v.FLAGGED;break;case v.FLAGGED:n.state=v.QUESTIONED;break;case v.QUESTIONED:n.state=v.INITIAL}}(e,t),e}var ne=function(){var e=Object(s.d)(j),t=Object(s.d)(_),n=Object(s.d)(A),a=Object(s.d)(S),r=Object(s.c)(),l=function(e,t,n,a){return e?"failed.png":t?"win.png":n<a?"laugh.png":"start.png"}(t,e,n,a);return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"flags_and_counter_container"},!m()&&i.a.createElement("div",{className:"flags"},i.a.createElement(q,null)),i.a.createElement("div",{className:"counter"},i.a.createElement(Y,null))),i.a.createElement("div",{className:"smile"},i.a.createElement("img",{className:"smile_image",src:"smiles/"+l,alt:"fail",onClick:ae(r)})),i.a.createElement("div",{className:"timer"},i.a.createElement(J,null)))};function ae(e){return function(){return e({type:a.startGame,payload:Object(o.a)({},H,{grid:{cells:M(10,10)}})})}}n(30),n(31);var re=Object(u.b)({grid:F,isGameFailed:_,isGameWon:j,isGridCalculated:C,gameTime:D,isFlagSelected:k,isFlagCrossedSelected:L}),ie=Object(s.b)(re)((function(e){var t=Object(s.c)();return Object(r.useEffect)((function(){e.isGameWon&&t({type:a.gameWon})})),i.a.createElement("div",{className:"grid"+(e.isGameFailed||e.isGameWon?" disabled":"")},e.grid.cells.map((function(e){return e.map((function(e){return i.a.createElement(N,Object.assign({key:e.position.x+"x"+e.position.y},e))}))})))})),le=function(){return i.a.createElement("div",{className:"body_container"},i.a.createElement("div",{className:"body"},i.a.createElement(ie,null)))},ce=(n(32),function(){var e=Object(s.c)(),t=Object(s.d)(k),n=Object(s.d)(L);return i.a.createElement("div",{className:"bottom_panel"},i.a.createElement("div",{className:"remove_flag",onClick:function(){return e({type:a.selectCrossedFlag})},style:n?{opacity:1}:{opacity:.3}},i.a.createElement("img",{className:"drag_crossed_mobile",src:"flag_big.png",alt:"123"})),i.a.createElement("div",{className:"add_flag",onClick:function(){return e({type:a.selectFlag})},style:t?{opacity:1}:{opacity:.3}},i.a.createElement("img",{className:"drag_mobile",src:"flag_big.png",alt:"123"})))}),oe=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(ne,null),i.a.createElement(le,null),m()&&i.a.createElement(ce,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=n(4),ue=Object(se.c)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.startGame:return t.payload;case a.cellClicked:var n=ee(e,t.payload);return Object(o.a)({},e,{grid:{cells:n},isGameWon:V(n),isFlagSelected:!1,isFlagCrossedSelected:!1});case a.cellClickFailed:return Object(o.a)({},e,{grid:Z(e.grid),isGameFailed:!0});case a.cellRightClicked:return Object(o.a)({},e,{grid:{cells:te(e.grid.cells,t.payload)}});case a.gameWon:return Object(o.a)({},e,{grid:Z(e.grid)});case a.incrementTime:return Object(o.a)({},e,{gameTime:K(e)?e.gameTime+1:e.gameTime});case a.dragNDroppedFlag:return Object(o.a)({},e,{grid:{cells:$(e.grid.cells,t.payload.cellToAddFlag,t.payload.cellToRemoveFlag)}});case a.selectFlag:return Object(o.a)({},e,{isFlagCrossedSelected:!1,isFlagSelected:!e.isFlagSelected});case a.selectCrossedFlag:return Object(o.a)({},e,{isFlagSelected:!1,isFlagCrossedSelected:!e.isFlagCrossedSelected});default:return H}}});n(33);var de=Object(se.d)(ue,se.a.apply(void 0,[]));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(s.a,{store:de},i.a.createElement(oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.0ef12b63.chunk.js.map