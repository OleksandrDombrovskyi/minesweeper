(this.webpackJsonpsapper=this.webpackJsonpsapper||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(33)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(5),l=n.n(c),o=(n(18),n(19),n(1)),u=n(2),s=n(12);n(25);function d(e){return function(t){if(0===t.button){var n=t.currentTarget,r=n.parentElement;n.ondragstart=function(){return!1};var i=p(n,".gridCell");document.body.appendChild(n);var c=n.style.position,l=n.style.zIndex,o=n.style.top,u=n.style.left;n.style.position="absolute",n.style.zIndex="1000",f(t.pageX,t.pageY,n);var s=function(e){f(e.pageX,e.pageY,n)};document.addEventListener("mousemove",s),n.onmouseup=function(t){document.removeEventListener("mousemove",s),n&&document.body.removeChild(n);var d=p(document.elementFromPoint(t.pageX,t.pageY),".gridCell"),f=m(i),g=m(d);if(g||f){if((null===g||void 0===g?void 0:g.x)===(null===f||void 0===f?void 0:f.x)&&(null===g||void 0===g?void 0:g.y)===(null===f||void 0===f?void 0:f.y))return void(r&&(r.appendChild(n),n.style.position=c||"relative",n.style.zIndex=l||"initial",n.style.top=o||"-32px",n.style.left=u||"-2px"));e({type:a.dragNDroppedFlag,payload:{cellToAddFlag:g,cellToRemoveFlag:f}})}}}}}function m(e){if(e){var t=e.id,n=t.substr(0,t.indexOf("_")),a=t.substr(t.indexOf("_")+1);return n&&a?{x:+n,y:+a}:null}return null}function f(e,t,n){n&&(n.style.left=e-n.offsetWidth/2+"px",n.style.top=t-n.offsetHeight/2+"px")}!function(e){e[e.startGame=0]="startGame",e[e.cellClicked=1]="cellClicked",e[e.cellClickFailed=2]="cellClickFailed",e[e.gameWon=3]="gameWon",e[e.cellRightClicked=4]="cellRightClicked",e[e.incrementTime=5]="incrementTime",e[e.dragNDroppedFlag=6]="dragNDroppedFlag"}(a||(a={}));var g,p=function(e,t){for(;null!=e;){if(e.matches(t))return e;if(null==e.parentElement)return null;e=e.parentElement}return null};!function(e){e[e.INITIAL=0]="INITIAL",e[e.FLAGGED=1]="FLAGGED",e[e.QUESTIONED=2]="QUESTIONED",e[e.OPEN=3]="OPEN"}(g||(g={}));var v=function e(t,n){Object(s.a)(this,e),this.position=void 0,this.number=void 0,this.state=void 0,this.isFailed=void 0,this.position=t,this.number=n,this.state=g.INITIAL,this.isFailed=!1};function h(e,t){return function(n){n.preventDefault(),t({type:a.cellRightClicked,payload:e})}}function E(e,t){return function(){t({type:a.cellClicked,payload:e})}}var b=Object(o.b)((function(e,t){return{position:t.position,number:I(t.position)(e),state:_(t.position)(e),isFailed:w(t.position)(e)}}))((function(e){var t=e.position,n=e.number,c=e.state,l=e.isFailed,u=Object(o.c)();return Object(r.useEffect)((function(){l&&u({type:a.cellClickFailed})})),i.a.createElement("div",{id:e.position.x+"_"+e.position.y,className:"gridCell",onClick:E(t,u),onContextMenu:h(t,u)},function(e,t,n,a){switch(e){case g.INITIAL:return i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"initial",width:"30",height:"30"}));case g.OPEN:return-1===t?function(e){return i.a.createElement("div",{className:"img-overlay-svg"},i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"open"+(e?" failedCell":""),width:"30",height:"30"})),i.a.createElement("img",{width:"33",height:"33",src:"bomb.svg",alt:"123"}))}(n):t>0?function(e){return i.a.createElement("div",null,i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"open",width:"30",height:"30"})),i.a.createElement("span",{className:"number_"+e},e))}(t):i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"open",width:"30",height:"30"}));case g.FLAGGED:return function(e){return i.a.createElement("div",{className:"img-overlay-svg"},i.a.createElement("svg",{className:"cell-sign",width:"33",height:"33"},i.a.createElement("rect",{className:"initial",width:"30",height:"30"})),i.a.createElement("img",{className:"cell-sign flag",width:"22",height:"22",src:"flag.png",alt:"123",onMouseDown:d(e)}))}(a);case g.QUESTIONED:return i.a.createElement("div",null,i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:"initial",width:"30",height:"30"})),i.a.createElement("span",{className:"question"},"?"))}}(c,n,l,u))})),y=function(e){return e.gameState},N=Object(u.a)([y],(function(e){return e.grid})),O=Object(u.a)([y],(function(e){return e.isGameFailed})),G=Object(u.a)([y],(function(e){return e.isGameWon})),j=Object(u.a)([y],(function(e){return e.isGridGenerated})),x=Object(u.a)([N],(function(e){return e.cells})),F=function(e){return Object(u.a)([x],(function(t){return t[e.y][e.x]}))},I=function(e){return Object(u.a)([F(e)],(function(e){return e.number}))},_=function(e){return Object(u.a)([F(e)],(function(e){return e.state}))},w=function(e){return Object(u.a)([F(e)],(function(e){return e.isFailed}))},T=Object(u.a)([N],(function(e){return e.cells.flat().filter((function(e){return-1===e.number})).length})),A=Object(u.a)([N],(function(e){return e.cells.flat().filter((function(e){return e.state===g.FLAGGED})).length})),C=Object(u.a)([y],(function(e){return e.gameTime}));n(26);function D(e,t){var n=e[t.y][t.x];n.state!==g.FLAGGED&&n.state!==g.QUESTIONED&&(-1===n.number&&(n.isFailed=!0),function e(t,n){if(k(t,n))return;var a=t[n.y][n.x];if(a.state===g.OPEN)return;if(a.state=g.OPEN,0===a.number)for(var r=n.x-1;r<=n.x+1;r++)for(var i=n.y-1;i<=n.y+1;i++)r===n.x&&i===n.y||e(t,{x:r,y:i})}(e,n.position))}function k(e,t){return t.x<0||t.y<0||t.x>=e.length||t.y>=e[0].length}function L(){return W({x:0,y:0},10,10)}function W(e,t,n){var a,r=function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if(!k(t,{x:a,y:n})){var r=t[a][n];if(-1===r.number){var i=void 0,c=void 0;do{i=P(0,t[0].length-1),c=P(0,t.length-1)}while(M(i,c,e)||S(i,c,t));r.number=0,t[c][i].number=-1}}return t}(e,function(e){for(var t=new Array,n=0;n<e.length;n++){for(var a=new Array,r=0;r<e[0].length;r++)a.push(new v({x:r,y:n},e[n][r]));t.push(a)}return t}(function(e){return e.map((function(e){return e.map((function(e){return e?-1:0}))}))}(function(e,t,n){for(var a=new Array,r=0;r<n;r++)a.push(e.slice(t*r,t*(r+1)));return a}(function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(function(e,t){for(var n=e*t,a=Math.floor(n/4),r=new Array,i=0;i<n;i++)i<a?r.push(!0):r.push(!1);return r}(t,n)),t,n))));return(a=r).forEach((function(e){return e.forEach((function(e){-1===e.number&&function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if((n!==e.x||a!==e.y)&&!k(t,{x:a,y:n})){var r=t[a][n];-1!==r.number&&(r.number+=1)}}(e.position,a)}))})),a}function S(e,t,n){return-1===n[t][e].number}function M(e,t,n){return e>=n.x-1&&e<=n.x+1&&t>=n.y-1&&t<=n.y+1}function P(e,t){return e+Math.floor((t-e)*Math.random())}n(27);var Q=function(){var e=Object(o.d)(T),t=Object(o.d)(A);return i.a.createElement("div",null,i.a.createElement("div",{className:"bomb_amount_container"},i.a.createElement("span",{className:"bomb_amount"},e-t)),i.a.createElement("div",{className:"image_container"},i.a.createElement("img",{className:"bomb_image",src:"bomb.svg",alt:"123"})))};function U(e){return 0===e.length?"00":1===e.length?"0"+e:e}n(28);var R,X=function(){var e=Object(o.d)(C),t=Object(o.c)();return Object(r.useEffect)((function(){return R=setInterval((function(){return t({type:a.incrementTime})}),1e3),function(){clearInterval(R)}})),i.a.createElement("div",null,i.a.createElement("span",{className:"timer_span"},function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%3600%60;return U(t.toString())+":"+U(n.toString())+":"+U(a.toString())}(e)))},Y=(n(29),function(){var e=Object(o.c)();return Object(r.useEffect)((function(){return function(e){var t=document.getElementById("draggable_flag");t&&(t.ondragstart=function(){return!1},t.onmousedown=function(n){if(t){var r=t.cloneNode(!0);r.id="clonedFlag",document.body.appendChild(r),r.ondragstart=function(){return!1},r.style.position="absolute",r.style.zIndex="1000",f(n.pageX,n.pageY,r);var i=function(e){f(e.pageX,e.pageY,r)};document.addEventListener("mousemove",i),r.onmouseup=function(t){document.removeEventListener("mousemove",i),r&&document.body.removeChild(r);var n=m(p(document.elementFromPoint(t.pageX,t.pageY),".gridCell"));n&&e({type:a.dragNDroppedFlag,payload:{cellToAddFlag:n}})}}})}(e)})),i.a.createElement("div",{id:"drag_n_drop_flags_container_id",className:"drag_n_drop_flags_container"},i.a.createElement("img",{className:"drag_n_drop_flag_1",width:"22",height:"22",src:"flag.png",alt:"123"}),i.a.createElement("img",{className:"drag_n_drop_flag_2",width:"22",height:"22",src:"flag.png",alt:"123"}),i.a.createElement("img",{className:"drag_n_drop_flag_3",width:"22",height:"22",src:"flag.png",alt:"123"}),i.a.createElement("img",{id:"draggable_flag",className:"drag_n_drop_flag_4",width:"22",height:"22",src:"flag.png",alt:"123"}))}),z=function(){var e=Object(o.d)(G),t=Object(o.d)(O),n=Object(o.d)(T),a=Object(o.d)(A),r=Object(o.c)(),c=function(e,t,n,a){return e?"failed.png":t?"win.png":n<a?"laugh.png":"start.png"}(t,e,n,a);return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"flags"},i.a.createElement(Y,null)),i.a.createElement("div",{className:"counter"},i.a.createElement(Q,null)),i.a.createElement("div",{className:"smile"},i.a.createElement("img",{className:"smile_image",src:"smiles/"+c,alt:"fail",onClick:B(r)})),i.a.createElement("div",{className:"timer"},i.a.createElement(X,null)))};function B(e){return function(){return e({type:a.startGame,payload:{isGameWon:!1,isGameFailed:!1,isGridGenerated:!1,gameTime:0,grid:{cells:L()}}})}}n(30),n(31);var J=Object(u.b)({grid:N,isGameFailed:O,isGameWon:G,isGridGenerated:j,gameTime:C}),q=Object(o.b)(J)((function(e){var t=Object(o.c)();return Object(r.useEffect)((function(){e.isGameWon&&t({type:a.gameWon})})),i.a.createElement("div",{className:"grid"+(e.isGameFailed||e.isGameWon?" disabled":"")},e.grid.cells.map((function(e){return e.map((function(e){return i.a.createElement(b,Object.assign({key:e.position.x+"x"+e.position.y},e))}))})))})),H=function(){return i.a.createElement("div",{className:"body_container"},i.a.createElement("div",{className:"body"},i.a.createElement(q,null)))},$=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(z,null),i.a.createElement(H,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(3),V=n(4),Z={isGameWon:!1,isGameFailed:!1,isGridGenerated:!1,gameTime:0,grid:{cells:L()}};function ee(e,t,n){return n&&function(e,t){var n=e[t.y][t.x];n.state!==g.OPEN&&(n.state=g.INITIAL)}(e,n),t&&function(e,t){var n=e[t.y][t.x];n.state!==g.INITIAL&&n.state!==g.QUESTIONED||(n.state=g.FLAGGED)}(e,t),e}function te(e){return e.isGridGenerated&&!e.isGameFailed&&!e.isGameWon}function ne(e){return function(e){return e.flat().filter((function(e){return-1!==e.number})).every((function(e){return e.state===g.OPEN}))}(e)}function ae(e){return function(e){e.cells.forEach((function(e){return e.forEach((function(e){-1===e.number&&e.state!==g.FLAGGED&&(e.state=g.OPEN)}))}))}(e),e}function re(e,t){return D(e,t),e}function ie(e,t){return function(e,t){var n=e[t.y][t.x];switch(n.state){case g.INITIAL:n.state=g.FLAGGED;break;case g.FLAGGED:n.state=g.QUESTIONED;break;case g.QUESTIONED:n.state=g.INITIAL}}(e,t),e}var ce=Object(K.c)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.startGame:return t.payload;case a.cellClicked:var n;return e.isGridGenerated?n=e.grid.cells:(n=W(t.payload,10,10),e.isGridGenerated=!0),Object(V.a)({},e,{grid:{cells:re(n,t.payload)},isGameWon:ne(n)});case a.cellClickFailed:return Object(V.a)({},e,{grid:ae(e.grid),isGameFailed:!0});case a.cellRightClicked:return Object(V.a)({},e,{grid:{cells:ie(e.grid.cells,t.payload)}});case a.gameWon:return Object(V.a)({},e,{grid:ae(e.grid)});case a.incrementTime:return Object(V.a)({},e,{gameTime:te(e)?e.gameTime+1:e.gameTime});case a.dragNDroppedFlag:return Object(V.a)({},e,{grid:{cells:ee(e.grid.cells,t.payload.cellToAddFlag,t.payload.cellToRemoveFlag)}});default:return Z}}});n(32);var le=Object(K.d)(ce,K.a.apply(void 0,[]));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(o.a,{store:le},i.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.9ee8add7.chunk.js.map