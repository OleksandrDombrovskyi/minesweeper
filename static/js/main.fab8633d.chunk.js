(this.webpackJsonpsapper=this.webpackJsonpsapper||[]).push([[0],{31:function(e,t,n){e.exports=n(54)},36:function(e,t,n){},37:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(13),l=n.n(c),o=(n(36),n(37),n(5)),s=n(2),u=n(3),m=n(17),d=n(26);n(42);!function(e){e[e.startGame=0]="startGame",e[e.cellClicked=1]="cellClicked",e[e.cellClickFailed=2]="cellClickFailed",e[e.gameWon=3]="gameWon",e[e.cellRightClicked=4]="cellRightClicked",e[e.incrementTime=5]="incrementTime",e[e.dragNDropFlag=6]="dragNDropFlag",e[e.selectFlag=7]="selectFlag",e[e.selectCrossedFlag=8]="selectCrossedFlag"}(a||(a={}));n(43);var f=function(e){return i.a.createElement("div",{className:"img-overlay-svg"},i.a.createElement("svg",{width:"33",height:"33"},i.a.createElement("rect",{className:g(e),width:"30",height:"30"})),e.children)};function g(e){var t=e.isPressed,n=e.isFailed,a=e.isOver;return(t?"open":"initial")+" "+(n?"failedCell":"")+" "+(!t&&a?"over":"")}n(44);var v=function(e){var t=e.symbol,n=e.fontSize;return i.a.createElement("span",{className:b(t),style:{fontSize:n+"pt"}},t)};function b(e){return"?"===e?"question":"number_"+e}n(45);var E=n(58),p=n(56);function y(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return navigator.userAgent.match(e)}))}var O=n(29),h="flag",F=function(e){var t=e.cellPosition,n=Object(s.c)(),r=Object(E.a)({item:{type:h,position:e.cellPosition},end:function(e,r){var i=!r.getDropResult();t&&i&&function(e,t){e({type:a.dragNDropFlag,payload:{cellToRemoveFlag:t}})}(n,t)},collect:function(e){return{isDragging:e.isDragging()}}}),c=Object(m.a)(r,3),l=c[0].isDragging,o=c[1],u=c[2];return i.a.createElement(i.a.Fragment,null,y()?i.a.createElement(j,null):i.a.createElement(p.a,{connect:u,src:"flag_24x24.png"}),i.a.createElement("img",{ref:o,width:"22",height:"22",src:"flag_24x24.png",style:{opacity:t&&l?.5:1},alt:"123"}))};var N,j=function(){var e=Object(O.a)(),t=e.display,n=e.itemType,a=(e.item,e.style);return t&&n===h?i.a.createElement("img",{width:"50",height:"50",src:"flag_big.png",alt:"123",style:Object(o.a)({},a,{zIndex:50})}):null},_=n(59);!function(e){e[e.INITIAL=0]="INITIAL",e[e.FLAGGED=1]="FLAGGED",e[e.QUESTIONED=2]="QUESTIONED",e[e.OPEN=3]="OPEN"}(N||(N={}));var G=function e(t,n){Object(d.a)(this,e),this.position=void 0,this.number=void 0,this.state=void 0,this.isFailed=void 0,this.position=t,this.number=n,this.state=N.INITIAL,this.isFailed=!1};function I(e,t){return function(n){n.preventDefault(),t({type:a.cellRightClicked,payload:e})}}function C(e,t){return function(){t({type:a.cellClicked,payload:e})}}var x=Object(s.b)((function(e,t){return{position:t.position,number:P(t.position)(e),state:W(t.position)(e),isFailed:M(t.position)(e)}}))((function(e){var t=e.position,n=e.number,c=e.state,l=e.isFailed,o=Object(s.c)();Object(r.useEffect)((function(){l&&o({type:a.cellClickFailed})}));var u=Object(_.a)({accept:h,drop:function(e){return function(e,t,n,r){var i=e.position;if(function(e,t){return e&&e.x===t.x&&e.y===t.y}(i,t)||n===N.OPEN)return;!function(e,t,n){e({type:a.dragNDropFlag,payload:{cellToAddFlag:t,cellToRemoveFlag:n}})}(r,t,i)}(e,t,c,o)},collect:function(e){return{isOver:e.isOver()}}}),d=Object(m.a)(u,2),g=d[0].isOver,b=d[1];return i.a.createElement("div",{id:e.position.x+"_"+e.position.y,className:"gridCell",onClick:C(t,o),onContextMenu:I(t,o)},i.a.createElement("div",{ref:b},i.a.createElement(f,{isPressed:c===N.OPEN,isFailed:l,isOver:g},function(e,t,n){switch(e){case N.INITIAL:return null;case N.OPEN:return-1===t?i.a.createElement("img",{className:"bomb",width:"33",height:"33",src:"bomb.svg",alt:"123"}):t>0?function(e){return i.a.createElement(v,{symbol:e,fontSize:18})}(t):null;case N.FLAGGED:return function(e){return i.a.createElement("div",{className:"flag"},i.a.createElement(F,{cellPosition:e}))}(n);case N.QUESTIONED:return i.a.createElement(v,{symbol:"?",fontSize:18})}}(c,n,t))))})),S=function(e){return e.gameState},T=Object(u.a)([S],(function(e){return e.grid})),A=Object(u.a)([S],(function(e){return e.isGameFailed})),D=Object(u.a)([S],(function(e){return e.isGameWon})),k=Object(u.a)([S],(function(e){return e.isGridCalculated})),w=Object(u.a)([T],(function(e){return e.cells})),L=function(e){return Object(u.a)([w],(function(t){return t[e.y][e.x]}))},P=function(e){return Object(u.a)([L(e)],(function(e){return e.number}))},W=function(e){return Object(u.a)([L(e)],(function(e){return e.state}))},M=function(e){return Object(u.a)([L(e)],(function(e){return e.isFailed}))},R=Object(u.a)([T],(function(e){return e.cells.flat().filter((function(e){return-1===e.number})).length})),Q=Object(u.a)([T],(function(e){return e.cells.flat().filter((function(e){return e.state===N.FLAGGED})).length})),U=Object(u.a)([S],(function(e){return e.gameTime})),z=Object(u.a)([S],(function(e){return e.isFlagSelected})),B=Object(u.a)([S],(function(e){return e.isFlagCrossedSelected}));n(46);function J(e,t){var n=e[t.y][t.x];n.state!==N.FLAGGED&&n.state!==N.QUESTIONED&&(-1===n.number&&(n.isFailed=!0),function e(t,n){if(q(t,n))return;var a=t[n.y][n.x];if(a.state===N.OPEN)return;if(a.state=N.OPEN,0===a.number)for(var r=n.x-1;r<=n.x+1;r++)for(var i=n.y-1;i<=n.y+1;i++)r===n.x&&i===n.y||e(t,{x:r,y:i})}(e,n.position))}function q(e,t){return t.x<0||t.y<0||t.x>=e.length||t.y>=e[0].length}function $(e,t){return function(e){for(var t=new Array,n=0;n<e.length;n++){for(var a=new Array,r=0;r<e[0].length;r++)a.push(new G({x:r,y:n},e[n][r]));t.push(a)}return t}(function(e){return e.map((function(e){return e.map((function(e){return e?-1:0}))}))}(function(e,t,n){for(var a=new Array,r=0;r<n;r++)a.push(e.slice(t*r,t*(r+1)));return a}(function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(function(e,t){for(var n=e*t,a=Math.floor(n/4),r=new Array,i=0;i<n;i++)i<a?r.push(!0):r.push(!1);return r}(e,t)),e,t)))}function H(e,t){var n,a=function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if(!q(t,{x:a,y:n})){var r=t[a][n];if(-1===r.number){var i=void 0,c=void 0;do{i=X(0,t[0].length-1),c=X(0,t.length-1)}while(V(i,c,e)||K(i,c,t));r.number=0,t[c][i].number=-1}}return t}(t,e);return(n=a).forEach((function(e){return e.forEach((function(e){-1===e.number&&function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if((n!==e.x||a!==e.y)&&!q(t,{x:a,y:n})){var r=t[a][n];-1!==r.number&&(r.number+=1)}}(e.position,n)}))})),n}function K(e,t,n){return-1===n[t][e].number}function V(e,t,n){return e>=n.x-1&&e<=n.x+1&&t>=n.y-1&&t<=n.y+1}function X(e,t){return e+Math.floor((t-e)*Math.random())}n(47);var Y=function(){var e=Object(s.d)(R),t=Object(s.d)(Q);return i.a.createElement("div",null,i.a.createElement("div",{className:"bomb_amount_container"},i.a.createElement("span",{className:"bomb_amount"},e-t)),i.a.createElement("div",{className:"image_container"},i.a.createElement("img",{className:"bomb_image",src:"bomb.svg",alt:"123"})))};function Z(e){return 0===e.length?"00":1===e.length?"0"+e:e}n(48);var ee,te=function(){var e=Object(s.d)(U),t=Object(s.c)();return Object(r.useEffect)((function(){return ee=setInterval((function(){return t({type:a.incrementTime})}),1e3),function(){clearInterval(ee)}})),i.a.createElement("div",null,i.a.createElement("span",{className:"timer_span"},function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%3600%60;return Z(t.toString())+":"+Z(n.toString())+":"+Z(a.toString())}(e)))},ne=(n(49),function(){return i.a.createElement("div",{id:"drag_n_drop_flags_container_id",className:"drag_n_drop_flags_container"},i.a.createElement("div",{className:"drag_n_drop_flag_1"},i.a.createElement(F,null)),i.a.createElement("div",{className:"drag_n_drop_flag_2"},i.a.createElement(F,null)),i.a.createElement("div",{className:"drag_n_drop_flag_3"},i.a.createElement(F,null)),i.a.createElement("div",{className:"drag_n_drop_flag_4"},i.a.createElement(F,null)))}),ae={isGameWon:!1,isGameFailed:!1,isGridCalculated:!1,gameTime:0,isFlagSelected:!1,isFlagCrossedSelected:!1,grid:{cells:$(10,10)}};function re(e,t,n){return n&&function(e,t){var n=e[t.y][t.x];n.state!==N.OPEN&&(n.state=N.INITIAL)}(e,n),t&&function(e,t){var n=e[t.y][t.x];n.state!==N.INITIAL&&n.state!==N.QUESTIONED||(n.state=N.FLAGGED)}(e,t),e}function ie(e){return e.isGridCalculated&&!e.isGameFailed&&!e.isGameWon}function ce(e){return function(e){return e.flat().filter((function(e){return-1!==e.number})).every((function(e){return e.state===N.OPEN}))}(e)}function le(e){return function(e){e.cells.forEach((function(e){return e.forEach((function(e){-1===e.number&&e.state!==N.FLAGGED&&(e.state=N.OPEN)}))}))}(e),e}function oe(e,t){var n=e.grid.cells;return e.isFlagSelected?function(e,t){var n=e[t.y][t.x];n.state!==N.OPEN&&(n.state=N.FLAGGED)}(n,t):e.isFlagCrossedSelected?function(e,t){var n=e[t.y][t.x];n.state===N.FLAGGED&&(n.state=N.INITIAL)}(n,t):(e.isGridCalculated||(n=H(n,t),e.isGridCalculated=!0),J(n,t)),n}function se(e,t){return function(e,t){var n=e[t.y][t.x];switch(n.state){case N.INITIAL:n.state=N.FLAGGED;break;case N.FLAGGED:n.state=N.QUESTIONED;break;case N.QUESTIONED:n.state=N.INITIAL}}(e,t),e}var ue=function(){var e=Object(s.d)(D),t=Object(s.d)(A),n=Object(s.d)(R),a=Object(s.d)(Q),r=Object(s.c)(),c=function(e,t,n,a){return e?"failed.png":t?"win.png":n<a?"laugh.png":"start.png"}(t,e,n,a);return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"flags_and_counter_container"},i.a.createElement("div",{className:"flags"},i.a.createElement(ne,null)),i.a.createElement("div",{className:"counter"},i.a.createElement(Y,null))),i.a.createElement("div",{className:"smile"},i.a.createElement("img",{className:"smile_image",src:"smiles/"+c,alt:"fail",onClick:me(r)})),i.a.createElement("div",{className:"timer"},i.a.createElement(te,null)))};function me(e){return function(){return e({type:a.startGame,payload:Object(o.a)({},ae,{grid:{cells:$(10,10)}})})}}n(50),n(51);var de=Object(u.b)({grid:T,isGameFailed:A,isGameWon:D,isGridCalculated:k,gameTime:U,isFlagSelected:z,isFlagCrossedSelected:B}),fe=Object(s.b)(de)((function(e){var t=Object(s.c)();return Object(r.useEffect)((function(){e.isGameWon&&t({type:a.gameWon})})),i.a.createElement("div",{className:"grid"+(e.isGameFailed||e.isGameWon?" disabled":"")},e.grid.cells.map((function(e){return e.map((function(e){return i.a.createElement(x,Object.assign({key:e.position.x+"x"+e.position.y},e))}))})))})),ge=function(){return i.a.createElement("div",{className:"body_container"},i.a.createElement("div",{className:"body"},i.a.createElement(fe,null)))},ve=(n(52),function(){var e=Object(s.c)(),t=Object(s.d)(z),n=Object(s.d)(B);return i.a.createElement("div",{className:"bottom_panel"},i.a.createElement("div",{className:"remove_flag",onClick:function(){return e({type:a.selectCrossedFlag})},style:n?{opacity:1}:{opacity:.3}},i.a.createElement("img",{className:"drag_crossed_mobile",src:"flag_big.png",alt:"123"})),i.a.createElement("div",{className:"add_flag",onClick:function(){return e({type:a.selectFlag})},style:t?{opacity:1}:{opacity:.3}},i.a.createElement("img",{className:"drag_mobile",src:"flag_big.png",alt:"123"})))}),be=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(ue,null),i.a.createElement(ge,null),y()&&i.a.createElement(ve,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=n(6),pe=Object(Ee.c)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.startGame:return t.payload;case a.cellClicked:var n=oe(e,t.payload);return Object(o.a)({},e,{grid:{cells:n},isGameWon:ce(n),isFlagSelected:!1,isFlagCrossedSelected:!1});case a.cellClickFailed:return Object(o.a)({},e,{grid:le(e.grid),isGameFailed:!0});case a.cellRightClicked:return Object(o.a)({},e,{grid:{cells:se(e.grid.cells,t.payload)}});case a.gameWon:return Object(o.a)({},e,{grid:le(e.grid)});case a.incrementTime:return Object(o.a)({},e,{gameTime:ie(e)?e.gameTime+1:e.gameTime});case a.dragNDropFlag:return Object(o.a)({},e,{grid:{cells:re(e.grid.cells,t.payload.cellToAddFlag,t.payload.cellToRemoveFlag)}});case a.selectFlag:return Object(o.a)({},e,{isFlagCrossedSelected:!1,isFlagSelected:!e.isFlagSelected});case a.selectCrossedFlag:return Object(o.a)({},e,{isFlagSelected:!1,isFlagCrossedSelected:!e.isFlagCrossedSelected});default:return ae}}}),ye=(n(53),n(57)),Oe=n(27),he=n(28);var Fe=Object(Ee.d)(pe,Ee.a.apply(void 0,[]));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(s.a,{store:Fe},i.a.createElement(ye.a,{backend:y()?he.a:Oe.a},i.a.createElement(be,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.fab8633d.chunk.js.map