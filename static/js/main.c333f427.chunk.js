(this.webpackJsonpsapper=this.webpackJsonpsapper||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(32)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),c=n.n(i),l=n(5),o=n.n(l),u=(n(18),n(19),n(1)),s=n(2),m=n(12);n(25);!function(e){e[e.startGame=0]="startGame",e[e.cellClicked=1]="cellClicked",e[e.cellClickFailed=2]="cellClickFailed",e[e.gameWon=3]="gameWon",e[e.cellRightClicked=4]="cellRightClicked",e[e.incrementTime=5]="incrementTime"}(a||(a={})),function(e){e[e.INITIAL=0]="INITIAL",e[e.FLAGGED=1]="FLAGGED",e[e.QUESTIONED=2]="QUESTIONED",e[e.OPEN=3]="OPEN"}(r||(r={}));var f=function e(t,n){Object(m.a)(this,e),this.position=void 0,this.number=void 0,this.state=void 0,this.isFailed=void 0,this.position=t,this.number=n,this.state=r.INITIAL,this.isFailed=!1};function d(e,t){return function(n){n.preventDefault(),t({type:a.cellRightClicked,payload:e})}}function g(e,t){return function(){t({type:a.cellClicked,payload:e})}}var h=Object(u.b)((function(e,t){return{position:t.position,number:N(t.position)(e),state:j(t.position)(e),isFailed:w(t.position)(e)}}))((function(e){var t=e.position,n=e.number,l=e.state,o=e.isFailed,s=Object(u.c)();return Object(i.useEffect)((function(){o&&s({type:a.cellClickFailed})})),console.log("Render cell"),c.a.createElement("div",{className:"gridCell",onClick:g(t,s),onContextMenu:d(t,s)},function(e,t,n){switch(e){case r.INITIAL:return c.a.createElement("svg",{width:"33",height:"33"},c.a.createElement("rect",{className:"initial",width:"30",height:"30"}));case r.OPEN:return-1===t?function(e){return c.a.createElement("div",{className:"img-overlay-svg"},c.a.createElement("svg",{width:"33",height:"33"},c.a.createElement("rect",{className:"open"+(e?" failedCell":""),width:"30",height:"30"})),c.a.createElement("img",{width:"33",height:"33",src:"bomb.svg",alt:"123"}))}(n):t>0?function(e){return c.a.createElement("div",null,c.a.createElement("svg",{width:"33",height:"33"},c.a.createElement("rect",{className:"open",width:"30",height:"30"})),c.a.createElement("span",{className:"number_"+e},e))}(t):c.a.createElement("svg",{width:"33",height:"33"},c.a.createElement("rect",{className:"open",width:"30",height:"30"}));case r.FLAGGED:return c.a.createElement("div",{className:"img-overlay-svg"},c.a.createElement("svg",{className:"cell-sign",width:"33",height:"33"},c.a.createElement("rect",{className:"initial",width:"30",height:"30"})),c.a.createElement("img",{className:"cell-sign flag",width:"22",height:"22",src:"flag.png",alt:"123"}));case r.QUESTIONED:return c.a.createElement("div",null,c.a.createElement("svg",{width:"33",height:"33"},c.a.createElement("rect",{className:"initial",width:"30",height:"30"})),c.a.createElement("span",{className:"question"},"?"))}}(l,n,o))})),v=function(e){return e.gameState},E=Object(s.a)([v],(function(e){return e.grid})),b=Object(s.a)([v],(function(e){return e.isGameFailed})),p=Object(s.a)([v],(function(e){return e.isGameWon})),O=Object(s.a)([v],(function(e){return e.isGridGenerated})),y=Object(s.a)([E],(function(e){return e.cells})),G=function(e){return Object(s.a)([y],(function(t){return t[e.y][e.x]}))},N=function(e){return Object(s.a)([G(e)],(function(e){return e.number}))},j=function(e){return Object(s.a)([G(e)],(function(e){return e.state}))},w=function(e){return Object(s.a)([G(e)],(function(e){return e.isFailed}))},I=Object(s.a)([E],(function(e){return e.cells.flat().filter((function(e){return-1===e.number})).length})),x=Object(s.a)([E],(function(e){return e.cells.flat().filter((function(e){return e.state===r.FLAGGED})).length})),F=Object(s.a)([v],(function(e){return e.gameTime}));n(26);function T(e,t){var n=e[t.y][t.x];n.state!==r.FLAGGED&&n.state!==r.QUESTIONED&&(-1===n.number&&(n.isFailed=!0),function e(t,n){if(k(t,n))return;var a=t[n.y][n.x];if(a.state===r.OPEN)return;if(a.state=r.OPEN,0===a.number)for(var i=n.x-1;i<=n.x+1;i++)for(var c=n.y-1;c<=n.y+1;c++)i===n.x&&c===n.y||e(t,{x:i,y:c})}(e,n.position))}function k(e,t){return t.x<0||t.y<0||t.x>=e.length||t.y>=e[0].length}function A(){return C({x:0,y:0},10,10)}function C(e,t,n){var a,r=function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if(!k(t,{x:a,y:n})){var r=t[a][n];if(-1===r.number){var i=void 0,c=void 0;do{i=W(0,t[0].length-1),c=W(0,t.length-1)}while(L(i,c,e)||D(i,c,t));r.number=0,t[c][i].number=-1}}return t}(e,function(e){for(var t=new Array,n=0;n<e.length;n++){for(var a=new Array,r=0;r<e[0].length;r++)a.push(new f({x:r,y:n},e[n][r]));t.push(a)}return t}(function(e){return e.map((function(e){return e.map((function(e){return e?-1:0}))}))}(function(e,t,n){for(var a=new Array,r=0;r<n;r++)a.push(e.slice(t*r,t*(r+1)));return a}(function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(function(e,t){for(var n=e*t,a=Math.floor(n/4),r=new Array,i=0;i<n;i++)i<a?r.push(!0):r.push(!1);return r}(t,n)),t,n))));return(a=r).forEach((function(e){return e.forEach((function(e){-1===e.number&&function(e,t){for(var n=e.x-1;n<=e.x+1;n++)for(var a=e.y-1;a<=e.y+1;a++)if((n!==e.x||a!==e.y)&&!k(t,{x:a,y:n})){var r=t[a][n];-1!==r.number&&(r.number+=1)}}(e.position,a)}))})),a}function D(e,t,n){return-1===n[t][e].number}function L(e,t,n){return e>=n.x-1&&e<=n.x+1&&t>=n.y-1&&t<=n.y+1}function W(e,t){return e+Math.floor((t-e)*Math.random())}n(27);var S=function(){var e=Object(u.d)(I),t=Object(u.d)(x);return c.a.createElement("div",null,c.a.createElement("span",{className:"bomb_amount"},e-t),c.a.createElement("div",{className:"image_container"},c.a.createElement("img",{className:"bomb_image",src:"bomb.svg",alt:"123"})))};function M(e){return 0===e.length?"00":1===e.length?"0"+e:e}n(28);var P,_=function(){var e=Object(u.d)(F),t=Object(u.c)();return Object(i.useEffect)((function(){return P=setInterval((function(){return t({type:a.incrementTime})}),1e3),function(){clearInterval(P)}})),c.a.createElement("div",null,c.a.createElement("span",{className:"timer_span"},function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%3600%60;return M(t.toString())+":"+M(n.toString())+":"+M(a.toString())}(e)))},Q=function(){var e=Object(u.d)(p),t=Object(u.d)(b),n=Object(u.d)(I),a=Object(u.d)(x),r=Object(u.c)(),i=function(e,t,n,a){return e?"failed.png":t?"win.png":n<a?"laugh.png":"start.png"}(t,e,n,a);return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"counter"},c.a.createElement(S,null)),c.a.createElement("div",{className:"smile"},c.a.createElement("img",{className:"smile_image",src:"smiles/"+i,alt:"fail",onClick:R(r)})),c.a.createElement("div",{className:"timer"},c.a.createElement(_,null)))};function R(e){return function(){return e({type:a.startGame,payload:{isGameWon:!1,isGameFailed:!1,isGridGenerated:!1,gameTime:0,grid:{cells:A()}}})}}n(29),n(30);var U=Object(s.b)({grid:E,isGameFailed:b,isGameWon:p,isGridGenerated:O,gameTime:F}),B=Object(u.b)(U)((function(e){var t=Object(u.c)();return Object(i.useEffect)((function(){e.isGameWon&&t({type:a.gameWon})})),console.log("Render grid"),c.a.createElement("div",{className:"grid"+(e.isGameFailed||e.isGameWon?" disabled":"")},e.grid.cells.map((function(e){return e.map((function(e){return c.a.createElement(h,Object.assign({key:e.position.x+"x"+e.position.y},e))}))})))})),J=function(){return c.a.createElement("div",{className:"body_container"},c.a.createElement("div",{className:"body"},c.a.createElement(B,null)))},q=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(Q,null),c.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=n(3),z=n(4),H={isGameWon:!1,isGameFailed:!1,isGridGenerated:!1,gameTime:0,grid:{cells:A()}};function K(e){return e.isGridGenerated&&!e.isGameFailed&&!e.isGameWon}function V(e){return function(e){return e.flat().filter((function(e){return-1!==e.number})).every((function(e){return e.state===r.OPEN}))}(e)}function X(e){return function(e){e.cells.forEach((function(e){return e.forEach((function(e){-1===e.number&&e.state!==r.FLAGGED&&(e.state=r.OPEN)}))}))}(e),e}function Y(e,t){return T(e,t),e}function Z(e,t){return function(e,t){var n=e[t.y][t.x];switch(n.state){case r.INITIAL:n.state=r.FLAGGED;break;case r.FLAGGED:n.state=r.QUESTIONED;break;case r.QUESTIONED:n.state=r.INITIAL}}(e,t),e}var ee=Object($.c)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.startGame:return t.payload;case a.cellClicked:var n;return e.isGridGenerated?n=e.grid.cells:(n=C(t.payload,10,10),e.isGridGenerated=!0),Object(z.a)({},e,{grid:{cells:Y(n,t.payload)},isGameWon:V(n)});case a.cellClickFailed:return Object(z.a)({},e,{grid:X(e.grid),isGameFailed:!0});case a.cellRightClicked:return Object(z.a)({},e,{grid:{cells:Z(e.grid.cells,t.payload)}});case a.gameWon:return Object(z.a)({},e,{grid:X(e.grid)});case a.incrementTime:return Object(z.a)({},e,{gameTime:K(e)?e.gameTime+1:e.gameTime});default:return H}}});n(31);var te=Object($.d)(ee,$.a.apply(void 0,[]));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(u.a,{store:te},c.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.c333f427.chunk.js.map